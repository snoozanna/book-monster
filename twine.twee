:: StoryTitle
The Book Monster


:: StoryData
{
	"ifid": "5AC7574A-0BC8-4EAE-924F-164E9D0C540A",
	"format": "SugarCube",
	"format-version": "2.36.1",
	"start": "landing",
	"zoom": 1
}



:: Story Stylesheet [stylesheet]
@import url('https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css');
@import url('https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css');
@import url('https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Sora:wght@100..800&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Bungee&display=swap');
@import url("styles/generics.css");
@import url("styles/styles.css");



:: UserScript [script]
/* Import external libraries. */

// importScripts(["https://code.jquery.com/jquery-3.5.1.slim.min.js",
// "https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js", 
// "https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js"]);



:: Story JavaScript [script]
$('#ui-bar').remove();
$(document.head).find('#style-ui-bar').remove();


/* Google Tag */
setup.JSLoaded = false;
 var lockID = LoadScreen.lock();  // Lock loading screen
 importScripts("https://www.googletagmanager.com/gtag/js?id=G-C6NP1M5W57")
     .then(function() {
         setup.JSLoaded = true;
         window.dataLayer = window.dataLayer || [];
         window.gtag = function (){ dataLayer.push(arguments); };
         gtag('js', new Date());
         gtag('config', 'G-C6NP1M5W57');
         LoadScreen.unlock(lockID);  // Unlock loading screen
     }).catch(function(error) {
         alert("Error: Could not load 'gtag.js'.");
     }
 );


 $(document).on('click', 'a', function (ev) {
 // Get the destination of the clicked link var passage 
 var passage = $(this).attr('data-passage');
 // Send the message to google analytics
 gtag('event', 'Navigation', {
     event_label    : passage,
     event_category : 'GuestClick'
 });

 });

setup.eatWords = () => {
  console.log("eating words")
  const allSpans = document.querySelectorAll(".eating-container span");  // Select all span elements
  let devourableWords = [];

  // Filter out spans that have the 'keep' class
  allSpans.forEach(span => {
    if (!span.classList.contains('keep')) {
      devourableWords.push(span);  // Only add devourable words to the array
    }
  });

  // Function to devour a random word
  function devourRandomWord() {
    if (devourableWords.length > 0) {
      // Choose a random index for the word to be devoured
      const randomIndex = Math.floor(Math.random() * devourableWords.length);
      const wordSpan = devourableWords[randomIndex];

      // Add the 'eaten' class to hide the word
      if (wordSpan) {
        wordSpan.classList.add("eaten");
        devourableWords.splice(randomIndex, 1);  // Remove the devoured word from the list

        // Continue devouring until all devourable words are eaten
        setTimeout(devourRandomWord, 500);
      }
    }
  }

  // Start devouring random words
  devourRandomWord();
}

setup.quickEatWords = () => {
  const allSpans = document.querySelectorAll(".eating-container span");  // Select all span elements
  let devourableWords = [];

  // Filter out spans that have the 'keep' class
  allSpans.forEach(span => {
    if (!span.classList.contains('keep')) {
      devourableWords.push(span);  // Only add devourable words to the array
    }
  });

  // Function to devour a random word
  function devourRandomWord() {
    if (devourableWords.length > 0) {
      // Choose a random index for the word to be devoured
      const randomIndex = Math.floor(Math.random() * devourableWords.length);
      const wordSpan = devourableWords[randomIndex];

      // Add the 'eaten' class to hide the word
      if (wordSpan) {
        wordSpan.classList.add("eaten");
        devourableWords.splice(randomIndex, 1);  // Remove the devoured word from the list

        // Continue devouring until all devourable words are eaten
        setTimeout(devourRandomWord, 100);
      }
    } else {
      // Once all devourable words are eaten, add "remaining" class to "keep" spans
      const keepSpans = document.querySelectorAll(".keep");
      keepSpans.forEach(span => {
        span.classList.add("remaining");
      });
    }
  }

  // Start devouring random words
  devourRandomWord();
}

setup.restoreWords = () => {
  const allSpans = document.querySelectorAll(".eating-container span");

  let restorableWords = [];

  // Filter out spans that have the 'keep' class
  allSpans.forEach(span => {
    if (span.classList.contains('eaten')) {
      restorableWords.push(span);  // Only add devourable words to the array
    }
  });

  // Function to devour a random word
  function restoreRandomWord() {
    if (restorableWords.length > 0) {
      // Choose a random index for the word to be devoured
      const randomIndex = Math.floor(Math.random() * restorableWords.length);
      const wordSpan = restorableWords[randomIndex];

      // Add the 'eaten' class to hide the word
      if (wordSpan) {
        wordSpan.classList.remove("eaten");
        restorableWords.splice(randomIndex, 1);  // Remove the devoured word from the list

        // Continue devouring until all devourable words are eaten
        setTimeout(restoreRandomWord, 50);
      }
    } else {
      // Once all devourable words are eaten, add "remaining" class to "keep" spans
      const keepSpans = document.querySelectorAll(".keep");
      keepSpans.forEach(span => {
        span.classList.remove("remaining");
      });
    }
  }

  // Start devouring random words
  restoreRandomWord();

}

setup.moveWords = () => {
      console.log("running")
    const words = document.querySelectorAll('.wordDisappear');
    console.log("words", words)

        // Helper function to generate random values
        function getRandom(min, max) {
            return Math.random() * (max - min) + min;
        }

        words.forEach((word, index) => {
            const duration = getRandom(10, 20); // Random animation duration between 10 and 20 seconds
            const delay = getRandom(0, 5);      // Random delay between 0 and 5 seconds

            // Create random movement and scale values
            const keyframes = `
                @keyframes move${index} {
                    0% { transform: translate(0, 0) scale(1) rotate(0deg); opacity: 0; }
                    20% { transform: translate(${getRandom(-50, 50)}vw, ${getRandom(-50, 50)}vh) scale(${getRandom(0.5, 1.5)}) rotate(${getRandom(-360, 360)}deg); opacity: ${getRandom(0.1, 0.5)}; }
                    50% { transform: translate(${getRandom(-50, 50)}vw, ${getRandom(-50, 50)}vh) scale(${getRandom(0.5, 1.5)}) rotate(${getRandom(-360, 360)}deg); opacity: ${getRandom(0.5, 1)}; }
                    75% { transform: translate(${getRandom(-50, 50)}vw, ${getRandom(-50, 50)}vh) scale(${getRandom(0.5, 1.5)}) rotate(${getRandom(-360, 360)}deg); opacity: ${getRandom(0.5, 1)}; }
                    100% { transform: translate(0, 0) scale(1) rotate(0deg); opacity: 1; }
                }
            `;

            // Inject keyframes into a style element in the document
            const styleSheet = document.styleSheets[0];
            styleSheet.insertRule(keyframes, styleSheet.cssRules.length);

            // Apply the animation to the word
            word.style.animation = `move${index} ${duration}s infinite ease-in-out`;
            word.style.animationDelay = `${delay}s`;
        });
}
setup.stillWords = () => {
    const words = document.querySelectorAll('.wordDisappear');
     // Helper function to generate random values
        function getRandom(min, max) {
            return Math.random() * (max - min) + min;
        }
    words.forEach((word, index) => {
            const duration = getRandom(10, 20); // Random animation duration between 10 and 20 seconds
            const delay = getRandom(0, 5);      // Random delay between 0 and 5 seconds

            // Create random movement and scale values
            const keyframes = `
                @keyframes move${index} {
                    0% { transform: translate(0, 0) scale(1) rotate(0deg); opacity: 0; }
                    20% { transform: translate(${getRandom(-50, 50)}vw, ${getRandom(-50, 50)}vh) scale(${getRandom(0.5, 1.5)}) rotate(${getRandom(-360, 360)}deg); opacity: ${getRandom(0.1, 0.5)}; }
                    50% { transform: translate(${getRandom(-50, 50)}vw, ${getRandom(-50, 50)}vh) scale(${getRandom(0.5, 1.5)}) rotate(${getRandom(-360, 360)}deg); opacity: ${getRandom(0.5, 1)}; }
                    75% { transform: translate(${getRandom(-50, 50)}vw, ${getRandom(-50, 50)}vh) scale(${getRandom(0.5, 1.5)}) rotate(${getRandom(-360, 360)}deg); opacity: ${getRandom(0.5, 1)}; }
                    100% { transform: translate(0, 0) scale(1) rotate(0deg); opacity: 1; font-size: 1.4em; color: #fff}
                }
            `;

            // Inject keyframes into a style element in the document
            const styleSheet = document.styleSheets[0];
            styleSheet.insertRule(keyframes, styleSheet.cssRules.length);

            // Apply the animation to the word

            word.style.animation = `move${index} ${duration}s forwards ease-in`;
            word.style.animationDelay = `${delay}s`;
        }); 
}


setup.handleFileUpload = () => {

  async function uploadImage(file) {
    const uploadPreset = 'f4uwtwnx';
    const cloudinaryURL = 'https://api.cloudinary.com/v1_1/dzutg2kf2/image/upload';
    const errorMount = document.getElementById("error");
    const successMount = document.getElementById("success");
     const instructions = document.getElementById("uploadInstructions");
    const logo = document.getElementById("loadingLogo"); // Get the logo element

    // Show the rotating logo when the upload starts
    logo.style.display = "block";
   instructions.style.display = "none";
    // errorMount.innerText = "Image uploading...";

    const formData = new FormData();
    formData.append('file', file);
    formData.append('upload_preset', uploadPreset);

    try {
      const response = await fetch(`${cloudinaryURL}`, {
        method: 'POST',
        body: formData
      });
      if (!response.ok) {
        throw new Error('Image upload failed');
      }

      const data = await response.json();
      console.log('Image uploaded successfully:', data);
     
    } catch (error) {
      console.error('Error uploading image:', error.message);
      errorMount.innerText = "Image upload failed.";
    } finally {
      // Hide the rotating logo after the upload finishes
      // logo.style.display = "none";
      successMount.style.display = "none";
      setTimeout(() => {
      Engine.play("ger7-1");
      }, 2000); 
    }
  }

  // Example usage
  const inputElement = document.getElementById('inputImg');
  inputElement.addEventListener('change', (event) => {
    const file = event.target.files[0];
    uploadImage(file);
  });
  inputElement.click();
};


setup.boatMultiDraggable = () => {
  let completed = [];
  const completeList = ["chapOne", "chapTwo", "chapThree", "chapFour", "chapFive"];
  console.log("boatMultiDraggable running");

  const messageContainer = document.getElementById("message");
  const audioMount = document.getElementById("audio");
  const bookImage = document.getElementById("book-image")

  // Get device width and height
  const deviceWidth = window.innerWidth;
  const deviceHeight = window.innerHeight;

  // Define target areas for boat and elephant
  const targetAreas = {
    chapOne: { 
      x: 0,
      y: deviceHeight * 0.55,  // Start at 55% of the height
      width: deviceWidth,
      height: deviceHeight * 0.45 // Cover 45% of the screen
    },
    chapTwo: { 
      x: 0,
      y: deviceHeight * 0.55,
      width: deviceWidth,
      height: deviceHeight * 0.45
    },
    chapThree: { 
      x: 0,
      y: deviceHeight * 0.55,
      width: deviceWidth,
      height: deviceHeight * 0.45
    },
    chapFour: { 
      x: 0,
      y: deviceHeight * 0.55,
      width: deviceWidth,
      height: deviceHeight * 0.45
    },
    chapFive: { 
      x: 0,
      y: deviceHeight * 0.55,
      width: deviceWidth,
      height: deviceHeight * 0.45
    }
  };

  const elements = [
    { id: 'chapter-one', targetArea: targetAreas.chapOne, name: 'chapOne' },
    { id: 'chapter-two', targetArea: targetAreas.chapTwo, name: 'chapTwo' }, 
    { id: 'chapter-three', targetArea: targetAreas.chapThree, name: 'chapThree' }, 
    { id: 'chapter-four', targetArea: targetAreas.chapFour, name: 'chapFour' }, 
    { id: 'chapter-five', targetArea: targetAreas.chapFive, name: 'chapFive' }
  ];

  const portContainer = document.getElementById('port-container');

  // Predefined color sequence
  const colorSequence = ['#5f3b8a', '#8054b5', '#5464b5', '#54b1b5', '#7fd1b9']; // Array of 5 colors

  // Function to handle the drag logic
  const makeDraggable = (element, name, targetArea) => {
    let offsetX, offsetY;
    const elem = document.getElementById(element);

    elem.addEventListener('touchstart', (e) => {
      const touch = e.touches[0];
      offsetX = touch.clientX - elem.getBoundingClientRect().left;
      offsetY = touch.clientY - elem.getBoundingClientRect().top;
      elem.style.cursor = 'grabbing';
    });

    elem.addEventListener('touchmove', (e) => {
      e.preventDefault(); // Prevent scrolling
      const touch = e.touches[0];
      const x = touch.clientX - offsetX;
      const y = touch.clientY - offsetY;
      elem.style.left = `${x}px`;
      elem.style.top = `${y}px`;
    });

    elem.addEventListener('touchend', () => {
      elem.style.cursor = 'grab';

      // Check if the element is within the target area
      const elemRect = elem.getBoundingClientRect();
      const portRect = portContainer.getBoundingClientRect();
      const elemX = elemRect.left - portRect.left;
      const elemY = elemRect.top - portRect.top;

      console.log(`${name} position: (${elemX}, ${elemY})`);
      console.log(`Target area: (${targetArea.x}, ${targetArea.y})`);

      if (
        elemX >= targetArea.x &&
        elemX + elemRect.width <= targetArea.x + targetArea.width &&
        elemY >= targetArea.y &&
        elemY + elemRect.height <= targetArea.y + targetArea.height
      ) {
        elem.classList.add('win');
         bookImage.classList.remove("wobble-once");
        bookImage.classList.add("wobble-once");
        updateCompletion(name, true);
         playSound();
        console.log(`win ${name}!`, completed);
          // Trigger wobble animation by removing and re-adding the class
        bookImage.classList.remove('wobble-once');
        // Force reflow to re-trigger the animation
        void bookImage.offsetWidth;
        bookImage.classList.add('wobble-once');
      } else {
        elem.classList.remove('win');
        updateCompletion(name, false);
        console.log(`lose ${name}.`, completed);
      }
    });
  };

  // Function to update the background color based on the number of wins
  const updateBackgroundColor = () => {
    const totalWins = completed.length;
    const maxWins = completeList.length;

    if (totalWins > 0 && totalWins <= maxWins) {
      // Apply color from the sequence based on how many wins have been completed
      document.body.style.backgroundColor = colorSequence[totalWins - 1];
    }
  };

  // Update the completion status of elements
  const updateCompletion = (name, isComplete) => {
    const index = completed.indexOf(name);
    if (isComplete && index === -1) {
      completed.push(name);
    } else if (!isComplete && index > -1) {
      completed.splice(index, 1);
    }
    updateBackgroundColor(); // Update color on each win/lose
    checkCompleted();
  };

  // Check if all tasks are completed
  const checkCompleted = () => {
    if (completeList.every(item => completed.includes(item))) {
      messageContainer.textContent = "You did it!";
      const audio = new Audio('assets/audio/MonsterGrowl.mp3');
      audio.play();
      setTimeout(()=> {
  document.body.style.backgroundColor = ""
      // Transition to the next passage in SugarCube
      Engine.play("begone");  
      }, 2000)
    

    } else {
      messageContainer.textContent = "Keep going...";
      console.log("keep going");
    }
  };

  const playSound = () => {
     const audio = new Audio('assets/sound/Correct1.mp3');
    audio.play(); 
  }

  // Initialize draggable elements
  elements.forEach(({ id, targetArea, name }) => makeDraggable(id, name, targetArea));
};


$(document).on('click', '.thumbnail-image', function() {
    // Get the full-size image path from the clicked thumbnail's data attribute
    var fullImageSrc = $(this).data('full');
    
    // Update the main gallery image to the clicked thumbnail's full-size image
    $('#imageGallery .gallery-main').attr('src', fullImageSrc);
    
    // Remove the 'active' class from all thumbnails
    $('.thumbnail-image').removeClass('active');
    
    // Add the 'active' class to the clicked thumbnail
    $(this).addClass('active');
});


:: StoryInit
<<cacheaudio "timer" "../assets/sound/timer.mp3">>
<<cacheaudio "ping1" "../assets/sound/ping1.mp3">>
<<cacheaudio "alarm" "../assets/sound/alarm.mp3">>
<<cacheaudio "correct" "../assets/sound/Correct1.mp3">>
<<cacheaudio "correct2" "../assets/sound/correct2.mp3">>
<<cacheaudio "error" "../assets/sound/error1.mp3">>
<<cacheaudio "LQintensity1" "../assets/sound/LQintensity1.mp3">>
<<cacheaudio "LQintensity3" "../assets/sound/LQintensity3.mp3">>
<<cacheaudio "30s" "../assets/sound/30secEle.mp3">>
<<cacheaudio "loading" "../assets/sound/loading.mp3">>
<<cacheaudio "monster1" "../assets/sound/monster1.mp3">>
<<cacheaudio "monster2" "../assets/sound/monster2.mp3">>
<<cacheaudio "monster3" "../assets/sound/monster3.mp3">>
<<cacheaudio "monster4" "../assets/sound/monster4.mp3">>
<<cacheaudio "monsterdet" "../assets/sound/MonsterDeteriating.mp3">>
<<cacheaudio "rooting" "../assets/sound/signalprocess3.mp3">>
<<cacheaudio "wordeat" "../assets/sound/WordEating.mp3">>
<<cacheaudio "siren" "../assets/sound/siren.mp3">>
<<cacheaudio "ritual" "../assets/sound/ritual.mp3">>
<<cacheaudio "mine1" "../assets/sound/MinesDeactivating.mp3">>
<<cacheaudio "mine2" "../assets/sound/MinesDeactivating2.mp3">>
<<cacheaudio "mine3" "../assets/sound/MinesDeactivating3.mp3">>
<<set $currentChapter to 1>>

:: findChapTitle [nobr]
<<set $chapters to {
    1: "Women in Disguise",
    2: "The Lion Queen",
    3: "Sea Unicorn",
    4: "Painted Elephant", 
    5: "The Lifesaving Club"
}>>




:: header[nobr]
<header>
</header>




:: footer[nobr]
<footer>
    <<button "Back">>
        <<goto $prevpass>>
    <</button>>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <div id="nextButtonContainer">
     </div>
</footer>

:: footerwords[nobr]
<footer class="words">
    <<button "Back">>
        <<goto $prevpass>>
    <</button>>

    <div id="nextButtonContainer">
     </div>
</footer>

<<timed 4s>>
  <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
  <</timed>>


:: footerger[nobr]
<footer class="geraldine">
    <<button "Back">>
        <<goto $prevpass>>
    <</button>>
  
   
</footer>


:: footernext[nobr]
<footer>
    <div/>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
   
</footer>




:: footerend[nobr]
<footer class="intro end">
    <div class="footer-icon">[img[/assets/img/icon3.png][$prevpass]]</div>
     <div class="footer-icon">[img[/assets/img/icon1.png][$pass]]</div>
    <<link "Start again">>
      <<script>>
        Engine.restart()
        <</script>>
        /* <<goto "landing">> */
    <</link>>
    
</footer>

:: footerintro[nobr]
<footer class="intro">
     <div class="footer-icon">[img[/assets/img/icon3.png][$prevpass]]</div>
      <div class="footer-icon">[img[/assets/img/for.png][$nextpass]]</div>
</footer>


:: landing [nobr] 
<<set $prevpass to "landing">>
<<set $pass to "landing">>
<<set $nextpass to "preintro">>
<<audio ":all" stop>>
<div class="desktop-message">
  <p>Please view this on a phone.</p>
</div>
<main class="logospin">
<div class="logo-wrapper slowRotate">
<img src="/assets/img/logo.png" alt="logo"/>

</div>
  <<button "Enter">>
        <<goto $nextpass>>
    <</button>>
</main>



:: headerpreintro [nobr]
<header class="intro pre">

  <div class="octo-title-wrapper">
    <h2 class="octo-title">OCTOPUS</h2>

  </div>
</header>

:: preintro [nobr]
<<set $prevpass to "landing">>
<<set $pass to "preintro">>
<<set $nextpass to "preintro2">>
<<include "headerpreintro">>
<main class="pre intro">
<div id="mount"></div>

<<timed 0.5s>>
    <<replace "#mount">>
  <p>Thank you for joining us at OCTOPUS</p>
    <</replace>>
  <</timed>>
<<timed 4s>>
    <<append "#mount">>
      <p>OCTOPUS stands for Official Chatham Taskforce Protecting Unrooted Stories </p>
    <</append>>
  <</timed>>
  <<timed 8s>>
    <<append "#mount">>
     <p>You must have found a book that is being eaten by the book monster. </p>
    <</append>>
  <</timed>>
  <<timed 12s>>
    <<append "#mount">>
      <p>Don’t worry this is normal for us here in OCTOPUS. </p>
    <</append>>
  <</timed>>
  <<timed 13s>>
    <<append "#mount">>
    <<button "Next">>
      <<goto $nextpass>>
      <</button>>
    <</append>>
  <</timed>>
 </main>
<<include "footerintro">>


:: preintro2 [nobr]
<<set $prevpass to "preintro">>
<<set $pass to "preintro2">>
<<set $nextpass to "preintro3">>
<<include "headerpreintro">>
<main class="pre intro">
<div id="mount"></div>

<<timed 0.5s>>
    <<replace "#mount">>
  <p>To connect with us you will need your volume up. </p>
    <</replace>>
  <</timed>>
<<timed 4s>>
    <<append "#mount">>
      <p>There is an option to press back to go to a previous page</p>
    <</append>>
  <</timed>>
  <<timed 8s>>
    <<append "#mount">>
     <p>It is best not to refresh your page</p>
    <</append>>
  <</timed>>
  <<timed 12s>>
    <<append "#mount">>
      <p>If you have any problems then you speak to the library team here. </p>
    <</append>>
  <</timed>>
  <<timed 13s>>
    <<append "#mount">>
    <<button "Next">>
      <<goto $nextpass>>
      <</button>>
    <</append>>
  <</timed>>
</main>
<<include "footerintro">>

:: preintro3 [nobr]
<<set $prevpass to "preintro2">>
<<set $pass to "preintro3">>
<<set $nextpass to "preintro4">>
<<include "headerpreintro">>
<main class="pre intro">
<div id="mount"></div>

<<timed 0.5s>>
    <<replace "#mount">>
  <p>Send in the book title and we can connect you to the right department. </p>
    <</replace>>
  <</timed>>
<<timed 4s>>
   <<append "#mount">>
     <<include "pwChathamStories">>
    <</append>>
  <</timed>>
</main>
<<include "footerintro">>
:: preintro4 [nobr]
<<set $prevpass to "preintro3">>
<<set $pass to "preintro4">>
<<set $nextpass to "phonecall">>
<<include "headerpreintro">>
<main class="pre intro">
<div id="mount"></div>

<<timed 0.5s>>
    <<replace "#mount">>
  <p>Oh no - the Chatham Stories book! </p>
    <</replace>>
  <</timed>>
<<timed 4s>>
    <<append "#mount">>
      <p>I didn’t think this would be eaten. </p>
    <</append>>
  <</timed>>
  <<timed 8s>>
    <<append "#mount">>
     <p>Let’s connect you to OCTOPUS HQ</p>
    <</append>>
  <</timed>>
  <<timed 12s>>
    <<append "#mount">>
      <p>We are based in the basement of the Docking Station, near the Dockyards.  </p>
    <</append>>
  <</timed>>

    <<timed 15s>>
    <<append "#mount">>
      <p>Find a place where we can call you - you may want to find a quiet corner.  </p>
    <</append>>
  <</timed>>

    <<timed 18s>>
    <<append "#mount">>
      <p>And when you’re ready, click the button so we can call through.  </p>
    <</append>>
  <</timed>>
  <<timed 21s>>
    <<append "#mount">>
    <<button "Ready">>
      <<goto $nextpass>>
      <</button>>
    <</append>>
  <</timed>>

</main>
<<include "footerintro">>



:: phonecall [nobr]
<<set $prevpass to "preintro4">>
<<set $pass to "phonecall">>
<<set $nextpass to "preintro5">>
<<timed 2s>>
<<include "clock">>
/* <<audio "bgm_space" play goto "">> */
<</timed>>
<<timed 3s>>
  <<removeclass ".opacitytwo" "opacitytwo">>
    <<timed 70s>>
      /* <<goto $nextpass>> */
      <</timed>>
<</timed>>
<div id="audio"> <audio src="assets/audio/OpeningScene-Toby.mp3" autoplay>Audio is not supported on your device</audio></div>
<main class="phonecall">
<div class="phonecall-name">
<h2>Octopus Helpline</h2>
<span id="phonecall-time" class="phonecall-time">Connecting...</span></div>
<div class="phonecall-avatar opacitytwo"> <img src="/assets/img/logo.png" alt="logo"/></div>
<div class="phonecall-btn-wrapper">
<div class="phonecall-btn-container opacitytwo">
  <div class="phonecall-btn">[img[/assets/img/icon3.png][$prevpass]]</div>
    <div class="phonecall-btn">[img[/assets/img/icon2.png][phonecalltext]]</div>
  <div class="phonecall-btn">[img[/assets/img/icon1.png][phonecall]]</div>


  </div>

<div class="phonecall-btn opacitytwo hangup">[img[/assets/img/phone-down.png][$nextpass]]</div>

</div>
</main>

:: clock [nobr]
<<silently>>
	<<set $seconds to 0>>
	<<set $minutes to 0>>

	<<repeat 1s>>
		<<set $seconds to $seconds + 1>>

		<<if $seconds >= 60>>
			<<set $minutes to $minutes + 1>>
			<<set $seconds to 0>>
		<</if>>

		<<replace "#phonecall-time">>
			$minutes : <<if $seconds lt 10>>0<</if>>$seconds
		<</replace>>
	<</repeat>>
<</silently>>

:: phonecalltext [nobr]
<main class="phonetext">
<h2>Octopus Helpline:</h2>
<br/>

<p>Hello! Octopus Helpline here</p>
<p>I’m so glad you picked up. </p>
<p>I haven’t got much time - it’s all systems go here - we have our tentacles in many pies - with lots of books to root…</p>
<p>At OCTOPUS, we root books by making sure they are being read.</p>
<p>That way they are never forgotten</p>
<p>But now we need help from brave and brilliant people </p>
<p>You must be these people.</p>
<p>Let me break it down for you. </p>
<p>There is a Book Monster. </p>
<p>Who is eating books! </p>
<p>The Book Monster eats books that aren’t being connected to</p>
<p>That aren’t being remembered. </p>
<p>That’s why you’re here - you can save them.</p>
<p>We need you to root the book here - in the present. </p>
<p>The Book Monster will try to stop us though. </p>
<p>They will put up challenges. </p>
<p>Challenges that will stop you from completing your mission. </p>

<p>By completing the challenges, you will root the stories forever</p>

<p>I will send you to the OCTOPUS Rooter. </p>

<p>Good luck</p>

<<button "Back">><<goto "phonecall">><</button>>
<<button "Next">><<goto $nextpass>><</button>>


</main>
<br/>
<br/>

:: preintro5 [nobr]
<<set $prevpass to "phonecall">>
<<set $pass to "preintro5">>
<<set $nextpass to "rooterlanding">>
<<include "headerpreintro">>
<main class="pre intro">
<div id="mount"></div>

<<timed 0.5s>>
    <<replace "#mount">>
  <p>You need to root the book. </p>
    <</replace>>
  <</timed>>
<<timed 4s>>
    <<append "#mount">>
      <p>We will link you with an OCTOPUS Rooter Agent to help you. </p>
    <</append>>
  <</timed>>
  <<timed 8s>>
    <<append "#mount">>
     <p>Her name is Geraldine. </p>
    <</append>>
  <</timed>>
  <<timed 11s>>
    <<append "#mount">>
      <p>It is her first day - but don’t worry she will instruct you how to face the Book Monster. </p>
    <</append>>
  <</timed>>

    <<timed 14s>>
    <<append "#mount">>
      <p>Don’t worry you have everything you need</p>
    <</append>>
  <</timed>>
  <<timed 16s>>
    <<append "#mount">>
    <<button "Ready">>
      <<goto $nextpass>>
      <</button>>
    <</append>>
  <</timed>>
</main>
<<include "footerintro">>

:: rooterlanding [nobr] 
<<set $prevpass to "preintro5">>
<<set $pass to "rooterlanding">>
<<set $nextpass to "intro">>
<<audio ":all" stop>>

<main class="logospin">
<div class="logo-wrapper fastRotate">
<img src="/assets/img/logo.png" alt="logo"/>

</div>
<p class="octo-welcome-text"> Loading Rooter...</p>
<<timed 4s>>
  <<goto $nextpass>>
  <</timed>>
</main>

:: headerintro [nobr]
<header class="intro">
  <div class="logo-wrapper ">
  <img src="/assets/img/logo.png" alt="logo"/>
  </div>
  <div class="octo-title-wrapper">
    <h2 class="octo-title">OCTOPUS</h2>
    <span>Rooter</span>
  </div>
</header>


:: intro [nobr] 
<<set $prevpass to "preintro5">>
<<set $pass to "intro">>
<<set $nextpass to "connecting">>
<<audio ":all" stop>>
<<include "headerintro">>
<main class="intro">
<div id="mount"></div>

<<timed 0.5s>>
    <<replace "#mount">>
  <p>Welcome to the OCTOPUS Rooter</p>
    <</replace>>
  <</timed>>
<<timed 4s>>
    <<append "#mount">>
      <p>Use this if you come across a Book Monster. </p>
    <</append>>
  <</timed>>
  <<timed 8s>>
    <<append "#mount">>
     <p>We can connect you to a book that needs rooting</p>
    <</append>>
  <</timed>>
  <<timed 12s>>
    <<append "#mount">>
      <p>And stop the Book Monster</p>
    <</append>>
  <</timed>>
  
    <<timed 14s>>
  <<button "Connect me">>
        <<goto $nextpass>>
        <</button>>
  <</timed>>

</main>
<<include "footerintro">>

:: pwChathamStories [nobr]
<div class="css-input code-input codeword-input">
    <<textbox "$codeword" "">>
    <<button "Enter">>
      <<set $codeword to $codeword.toUpperCase().trim()>>
      
      /% CODEWORD CORRECT FOR CHATHAM STORIES%/
      <<if $codeword isnot "" and $codeword is "CHATHAM STORIES">>
        <<replace "#coderesult">><h2>Accepted.</h2><</replace>>
        <<audio "correct" play>>

        <<timed 3s>><<goto $nextpass>><</timed>>
      <</if>>

       /% CODEWORD CORRECT FOR GERALDINE %/
      <<if $codeword isnot "" and $codeword is "GERALDINE">>
        <<replace "#coderesult">><h2>Accepted.</h2><</replace>>
        <<audio "correct" play>>
        <<timed 3s>><<goto "phonecallger">><</timed>>
      <</if>>

      /% CODEWORD INCORRECT %/
        <<if $codeword isnot "" and ($codeword isnot "CHATHAM STORIES" and $codeword isnot "GERALDINE")>>
           <<audio "error" play>>
           <<replace "#coderesult">><h2>Not recognised.</h2><</replace>>
         <<timed 1.5s>><<replace "#coderesult">><</replace>><</timed>>
         <</if>>
       
    <</button>>
  <br/> <br/>
    <div id="coderesult"></div>
    <br/>
</div>





:: connecting [nobr]
<<set $prevpass to "intro">>
<<set $pass to "connecting">>
<<set $nextpass to "gerIntro-1">>
    <<audio "loading" play>>
<<include "headerintro">>
<main class="connecting">
  <div class="book-wrapper" id="wrapper">
  <img src="/assets/img/bookflat.png" alt="open book"/>
  </div>
  <div id="mount"></div>
  <<timed 0.1s>>
    <<replace "#mount">>
   <<type 80ms>><p class="octo-welcome-text"> Welcome.</p><</type>>
    <</replace>>
  <</timed>>
  <<timed 4s>>
    <<replace "#mount">>
      <<type 80ms>><p class="octo-welcome-text"> Thank you</p><</type>>
    <</replace>>
  <</timed>>
  <<timed 8s>>
    <<replace "#mount">>
      <<type 80ms>><p class="octo-welcome-text"> You are connecting to...</p><</type>>
    <</replace>>
  <</timed>>
  <<timed 12s>>
    <<replace "#mount">>
       <<type 80ms>><p class="octo-welcome-text"> You are connecting to...</p><</type>>
    <</replace>>
  <</timed>>
 <<timed 16s>>
      <<replace "#wrapper">><</replace>>
    <<replace "#mount">>
      <<audio ":all" stop>>
      <h2 class="fancy"> Geraldine</h2>
       <<audio "correct" play>>
    <</replace>>
  <</timed>>

  <<timed 23s>>
    <<append "#mount">>
      <br/>
      <br/>
      <<button "Let's go!">>
        <<goto $nextpass>>
        <</button>>
    <</append>>
  <</timed>>

</main>
<<include "footer">>
:: headerGeraldine [nobr]
<header class="talking">
<div class="avatar-icon">[img[./assets/img/logo.png]]</div>
<div class="userInfo">
  <h2>Geraldine</h2>
 <span class="online-dot">●</span><span>Online</span>
</div>
</header>



:: _templateGeraldine[nobr]
<<addclass "body" "light">>

<<include "headerGeraldine">>
<main class="talking">
    <div id="msgMount"></div>
        <<if $pass>>
            <<set $uniqueContent to $pass+"-messages">>
            <<include $uniqueContent>>
        <<else>>
            No content provided.
        <</if>>
     <div id="nextButtonContainer">
     </div>
</main>
<<include "footer">>

:: gerIntro-1 [nobr]
<<set $prevpass to "connecting">>
<<set $pass to "gerIntro-1">>
<<set $nextpass to "gerIntro-2">>

<<include "_templateGeraldine">>


:: gerIntro-1-messages [nobr]
<<timed 0.5s>>
  <<audio ":all" "stop">>
        <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Hello</p>
       </div>
        <</append>>
    <</timed>>

    <<timed 3s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
        <p>You must be the people who I’m working with today.  </p>
       </div>
        <</append>>
    <</timed>>

    <<timed 6s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
        <p>I’m Geraldine</p>
       </div>
        <</append>>
    <</timed>>

    <<timed 10s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>I work for OCTOPUS</p>
       </div>
        <</append>>
    <</timed>>

     <<timed 12s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>Love the work.</p>
       </div>
        <</append>>
    <</timed>>

     <<timed 14s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>Protecting Unrooted Stories. </p>
       </div>
        <</append>>
    <</timed>>

     <<timed 16s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>I’m so excited to be here.</p>
       </div>
        <</append>>
    <</timed>>

     <<timed 18s>>
      <<replace "#nextButtonContainer">>
      <<button "Next">>
        <<goto $nextpass>>
        <</button>>
          <</replace>>
    <</timed>>


:: gerIntro-2 [nobr]
<<set $prevpass to "gerIntro-1">>
<<set $pass to "gerIntro-2">>
<<set $nextpass to "gerIntro-3">>

<<include "_templateGeraldine">>


:: gerIntro-2-messages [nobr]
<<timed 0.5s>>
        <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
           <p>This is actually my first day. </p>
       </div>
        <</append>>
    <</timed>>

    <<timed 3s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>My first Rooting in fact.</p>
       </div>
        <</append>>
    <</timed>>

    <<timed 6s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
     <p>Never done it before</p>
       </div>
        <</append>>
    <</timed>>

    <<timed 10s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
         <p>But we’ll be fine</p>
       </div>
        <</append>>
    <</timed>>

     <<timed 12s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>Totally fine.</p>
       </div>
        <</append>>
    <</timed>>

     <<timed 15s>>
      <<replace "#nextButtonContainer">>
      <<button "Next">>
          <<goto "roar">>
        <</button>>
          <</replace>>
    <</timed>>

:: gerIntro-3 [nobr]
<<set $prevpass to "gerIntro-2">>
<<set $pass to "gerIntro-3">>
<<set $nextpass to "gerIntro-3a">>

<<include "_templateGeraldine">>

:: gerIntro-3-messages [nobr]
<<timed 0.5s>>
        <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
           <p>Ok let me load up the book.</p>
       </div>
        <</append>>
    <</timed>>

    <<timed 3s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Chatham Stories. </p>
       </div>
        <</append>>
    <</timed>>

    <<timed 6s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
     <p>A book that was once full of stories of my local town Chatham</p>
       </div>
        <</append>>
    <</timed>>

    <<timed 10s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
         <p>But now...it seems they have all been taken</p>
       </div>
        <</append>>
    <</timed>>

        <<timed 13s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>Written by UNKNOWN.</p>
       </div>
        <</append>>
    <</timed>>

     <<timed 16s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>Written by Unknown is odd - maybe together we can discover who the author was. </p>
       </div>
        <</append>>
    <</timed>>

 <<timed 19s>>
      <<replace "#nextButtonContainer">>
      <<button "Next">>
          <<goto $nextpass>>
        <</button>>
          <</replace>>
    <</timed>>

:: gerIntro-3a [nobr]
<<set $prevpass to "gerIntro-3">>
<<set $pass to "gerIntro-3a">>
<<set $nextpass to "gerIntro-4">>

<<include "_templateGeraldine">>

:: gerIntro-3a-messages [nobr]
<<timed 0.5s>>
        <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
           <p>It must be because of the Book Monster. </p>
       </div>
        <</append>>
    <</timed>>

    <<timed 3s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Let’s load up the information from OCTOPUS to find out what they know. </p>
       </div>
        <</append>>
    <</timed>>

 <<timed 6s>>
      <<replace "#nextButtonContainer">>
      <<button "Load info">>
          <<goto "loading">>
        <</button>>
          <</replace>>
    <</timed>>


:: bookmonsterprofile [nobr]


  <div class="cipher-wrapper">
  <span class="cipher-title"><soan class="octo-title">OCTOPUS</soan> Profile</span>
    <div class="bm-info-wrapper cipherpaper">
    <h2>The Book Monster</h2>
    <span><b>DOB:</b> Unknown</span>
    <span><b>Nickname:</b> Googly Moogly</span>
    <span><b>Likes:</b> Eating Books</span>
    <span><b>Dislikes:</b> Books, Stories & Characters! </span>
    <span><b>Appearance:</b> uncertain- normally invisible - images on file from previous reported encounters. </span>
  </div>
  <div class="logo-wrapper-cipher">
  <img src="/assets/img/logo.png" alt="logo"/>
  </div>
  </div>


:: loading [nobr]

<main class="loading">
<div class="logo-wrapper" >
<img src="/assets/img/logo.png" alt="logo" class="fastRotate"/>
<br/>

</div>
<br/>
<div id="mount"></div>

</main>

<<timed 0.5s>>
<<replace "#mount">>
  <<type 100ms>>
    <h2 class="octo-title">Loading...</h2>
    <</type>>
<</replace>>
  <</timed>>

  <<timed 4s>>
<<replace "#mount">>
  <<type 100ms>>
    <h2 class="octo-title">Loading...</h2>
    <</type>>
<</replace>>
  <</timed>>

<<timed 8s>>
  <<goto $nextpass>>
  <</timed>>
:: gerIntro-4 [nobr]
<<set $prevpass to "gerIntro-3a">>
<<set $pass to "gerIntro-4">>
<<set $nextpass to "octopusgallery">>

<<include "_templateGeraldine">>

:: gerIntro-4-messages [nobr]

<<timed 0.1s>>
   <<append "#msgMount">>
      <<include "bookmonsterprofile">>
      <</append>>
    <</timed>>

     <<timed 3s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>There have only been a few sightings of the monster. </p>
       </div>
        <</append>>
    <</timed>>

      <<timed 6s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>But those who have encountered it in the past have drawn images of what they saw. </p>
       </div>
        <</append>>
    <</timed>>

   <<timed 9s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Let’s load that up and see what we are facing.   </p>
       </div>
        <</append>>
    <</timed>>

  <<timed 12s>>
      <<replace "#nextButtonContainer">>
      <<button "Load Images">>
          <<goto "loading">>
        <</button>>
          <</replace>>
    <</timed>>


:: galleryheader[nobr]
<header class="intro gallery">
  <div class="logo-wrapper ">
  <img src="/assets/img/logo.png" alt="logo"/>
  </div>
  <div class="octo-title-wrapper">
    <h2 class="octo-title">Gallery</h2>
    <span>The Book Monster</span>
  </div>
</header>




:: octopusgallery [nobr]
<<set $prevpass to "gerIntro-4">>
<<set $pass to "octopusgallery">>
<<set $nextpass to "gerIntro-6">>
<<include "galleryheader">>
<main class="gallery">


<div id="imageGallery">
    <img src="/assets/img/monster1.png" class="gallery-main">
</div>

<!-- Thumbnails container -->

</main>

<footer class="gallery fadeInTitle">
<div class="footer-icon">[img[/assets/img/icon3.png][$prevpass]]</div>
<div id="thumbnails">
<div class="thumbnail-wrapper">
    <img src="/assets/img/monster1.png" class="thumbnail-image active" data-full="/assets/img/monster1.png">
</div>
<div class="thumbnail-wrapper">
    <img src="/assets/img/monster2.png" class="thumbnail-image" data-full="/assets/img/monster2.png">
</div>
<div class="thumbnail-wrapper">
    <img src="/assets/img/monster3.png" class="thumbnail-image" data-full="/assets/img/monster3.png">
</div>
<div class="thumbnail-wrapper">
    <img src="/assets/img/monster4.png" class="thumbnail-image" data-full="/assets/img/monster4.png">
</div>
</div>
   <div class="footer-icon">[img[/assets/img/for.png][$nextpass]]</div>
</footer>




:: gerIntro-6 [nobr]
<<set $prevpass to "octopusgallery">>
<<set $pass to "gerIntro-6">>
<<set $nextpass to "gerIntro-6b">>

<<include "_templateGeraldine">>


:: gerIntro-6-messages [nobr]
<<timed 0.1s>>
        <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
           <p>I know it wasn't what I was expecting either. </p>
       </div>
        <</append>>
    <</timed>>
 <<timed 3s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>I hope we don’t come face-to-face with Googly Moogly, </p>
       </div>
        <</append>>
    <</timed>>
    <<timed 6s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Something that you can’t see but is always nearby books.  </p>
       </div>
        <</append>>
    <</timed>>

    <<timed 9s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
     <p>That’s why it likes the library so much. </p>
       </div>
        <</append>>
    <</timed>>

    <<timed 12s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
         <p>It has a taste for books that are being forgotten. </p>
       </div>
        <</append>>
    <</timed>>

     <<timed 15s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>And it seems Chatham Stories are next.</p>
       </div>
        <</append>>
    <</timed>>


     <<timed 17s>>
      <<replace "#nextButtonContainer">>
      <<button "Next">>
          <<goto $nextpass>>
        <</button>>
          <</replace>>
    <</timed>>

<<set $imageIndex to 1>>
:: gerIntro-6b [nobr]
<<set $prevpass to "gerIntro-6">>
<<set $pass to "gerIntro-6b">>
<<set $nextpass to "gerIntro-6c">>

<<include "_templateGeraldine">>

:: gerIntro-6b-messages [nobr]
 <<timed 0.5s>>
        <<audio "ping1" "play">>
         <<replace "#msgMount">>
       <div class="message"> 
        <p>But there is hope</p>
       </div>
        <</replace>>
    <</timed>>

     <<timed 3s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>You are that hope. </p>
       </div>
        <</append>>
    <</timed>>

     <<timed 6s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>The Monster is using the stories it is eating to set challenges. </p>
       </div>
        <</append>>
    <</timed>>

     <<timed 9s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>You need to stop the Monster by completing the challenges </p>
       </div>
        <</append>>
    <</timed>>

     <<timed 12s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>Fragments may come through in mysterious ways that we need to work out.  </p>
       </div>
        <</append>>
    <</timed>>

      <<timed 15s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>But we need to be quick.  </p>
       </div>
        <</append>>
    <</timed>>

    <<timed 18s>>
      <<replace "#nextButtonContainer">>
      <<button "Next">>
          <<goto $nextpass>>
        <</button>>
          <</replace>>
    <</timed>>



:: gerIntro-6c [nobr]
<<set $prevpass to "gerIntro-6b">>
<<set $pass to "gerIntro-6c">>
<<set $nextpass to "chapterTitle1">>

<<include "_templateGeraldine">>

:: gerIntro-6c-messages [nobr]

 <<timed 0.5s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>I know this is a lot to take on, and we’ve only just met, but I need your help. </p>
       </div>
        <</append>>
  <</timed>>

    <<timed 4s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>We need to root this story and discover who wrote this book!</p>
       </div>
        <</append>>
  <</timed>>

   <<timed 7s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>Would you be up for helping me? </p>
       </div>
        <</append>>
  <</timed>>

  <<timed 10s>>
        <<audio "ping1" "play">>
         <<append "#msgMount">>
       <div class="message"> 
        <p>If you are - hit the button below and we can begin rooting the stories.  </p>
       </div>
        <</append>>
  <</timed>>

     <<timed 13s>>
      <<replace "#nextButtonContainer">>
      <<button "Begin Rooting">>
          <<goto $nextpass>>
        <</button>>
          <</replace>>
    <</timed>>

:: headerchap [nobr]
<header class="intro">
  <div class="logo-wrapper black ">
  <img src="/assets/img/logo.png" alt="logo"/>
  </div>
  <div class="octo-title-wrapper">
    <h2 class="octo-title">OCTOPUS</h2>
    /* <span>Rooter</span> */
  </div>
</header>

:: _chapterTitleTemplate [nobr]
<<addclass "body" "grey">>
<<include "findChapTitle">>
<<timed 0.1s>>
 
<main class="chapter-title ">
<div class="chapter-img-wrapper fadeInTitle">
<img id="chapterImage" sc-eval:src="'/assets/img/chapter' + [$currentChapter] + '.png'"  alt="Chapter Image"/>
</div>
<h2 class="">Chapter $currentChapter</h2>

<div class="chapter-title-wrapper">
<h3 class="">$chapters[$currentChapter]</h3></div>
</main>
<</timed>>
<<timed 5s>>
  <<goto $nextpass>>
  <</timed>>



:: chapterTitle1 [nobr]
<<set $prevpass to "gerIntro-6c">>
<<set $pass to "chapterTitle1">>
<<set $nextpass to "wordsLeft1">>
<<set $currentChapter to 1>>
<<audio ":all" stop>>
<div id="audio"> <audio src="assets/audio/NewChapterSound.mp3" autoplay>Audio is not supported on your device</audio></div>
<<include "_chapterTitleTemplate">>
<<include "footerintro">>

:: wordsLeft1 [nobr]
<<set $prevpass to "chapterTitle1">>
<<set $pass to "wordsLeft1">>
<<set $nextpass to "ger2-1">>
<<audio "wordeat" play loop>>
<main>
    
  <div class="eating-container">

    <p>
      <span class="keep">Women</span> <span>were</span> <span>some</span> <span>of</span> <span>the</span> <span>hidden</span> <span>heroines</span> <span>of</span> <span>the</span> <span>Navy</span>
    </p>
    <p>
      <span>Some</span> <span>would</span> <span>mend</span> <span>ships,</span> <span>some</span> <span>would</span> <span>make</span> <span>ropes</span>
    </p>
    <p>
      <span>Some</span> <span>even</span> <span>dressed</span> <span>like</span> <span>men</span> <span>to</span> <span>fight</span> <span>in</span> <span>the</span> <span>war</span>
    </p>
    <p>
  <span>Mary</span> <span>Lacy</span> <span>travelled</span> <span>to</span> <span>Chatham</span> <span>in</span> <span>her</span> <span>fathers’</span> <span>clothes</span> <span>and</span> <span>she</span> <span>became</span> <span>William</span> <span>Chandler</span>
</p>
<p>
  <span>Not</span> <span>long</span> <span>after</span> <span>that,</span><span>she</span> <span>joined</span> <span>the</span> <span>HMS</span> <span class="keep">Sandwich</span> <span>and</span> <span>set</span> <span>sail</span>
</p>
<p>
  <span>Although</span> <span>they</span> <span>didn't</span> <span>know</span> <span>she</span> <span>was</span> <span>a</span> <span>‘she’</span> <span>at</span> <span>the</span> <span>time</span>
</p>
<p>
  <span>She</span> <span>fought</span> <span>in</span> <span>wars</span> <span>and</span> <span>survived</span> <span>hurricanes</span><span>!</span>
</p>
<p>
  <span>She</span> <span>stayed</span> <span>in</span> <span class="keep">disguise</span> <span>for</span> <span>many</span> <span>years</span> <span>until</span> <span>her</span> <span>identity</span> <span>was</span> <span>revealed</span> <span>and</span> <span>she</span> <span>was</span> <span>discharged</span><span>.</span>
</p>

  </div>


</main>

<<include "footerwords">>

<<done>>
/* <<set $move to setup.moveWords()>> */
<<set $move to setup.quickEatWords()>>
<</done>>

<<timed 12s>>
  <<goto $nextpass>>
  <</timed>>


:: ger2-1 [nobr]
<<set $prevpass to "wordsLeft1">>
<<set $pass to "ger2-1">>
<<set $nextpass to "code4">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>

:: ger2-1-messages [nobr]

<<timed 0.1s>>
      <<append "#msgMount">>
       <div class="message"> 
          <p>What does that mean?  </p>
       </div>
        <</append>>
    <</timed>>

     <<timed 3s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Maybe we’re too late </p>
       </div>
        <</append>>
    <</timed>>

   <<timed 5s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Wait. </p>
       </div>
        <</append>>
    <</timed>>


     <<timed 7s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Disguised...</p>
       </div>
        <</append>>
    <</timed>>

     <<timed 9s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>They were disguised...</p>
       </div>
        <</append>>
    <</timed>>

      <<timed 12s>>
    <<audio "ping1" "play">>
        <<replace "#msgMount">>
       <div class="message"> 
          <p>And the name is disguised. </p>
       </div>
        <</replace>>
    <</timed>>


    <<timed 15s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>It must be the Book Monster. </p>
       </div>
        <</append>>
    <</timed>>

     <<timed 18s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>There are 4 letters.  </p>
       </div>
        <</append>>
    <</timed>>

     <<timed 21s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Maybe they can be found where you are. </p>
       </div>
        <</append>>
    <</timed>>

       <<timed 24s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Break the code they have set </p>
       </div>
        <</append>>
    <</timed>>

       <<timed 27s>>
    <<audio "ping1" "play">>
        <<replace "#msgMount">>
       <div class="message"> 
          <p>4 letters to find. </p>
       </div>
        <</replace>>

    <</timed>>
         <<timed 30s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Let’s load the first one up first. </p>
       </div>
        <</append>>
    <</timed>>

  <<timed 31s>>
      <<replace "#nextButtonContainer">>
      <<button "Next">>
          <<goto $nextpass>>
        <</button>>
          <</replace>>
    <</timed>>

:: codeheader [nobr]
<header id="header" class="code">
 
</header>


:: code4 [nobr]
<<set $prevpass to "ger2-1">>
<<set $pass to "code4">>
<<set $nextpass to "ger3-1">>
<<set $correctans to []>>
<<include "codeheader">>
$correctans
<main class="main-section codebreaking" id="mainMount">

<div class="wordcontainer">
<<set $current to "">>
/* Letter S  */
<div class="letter-item l" id="letterItemL">
  <<link "1">>
   /* <<textbox "$s" "">> */
   /* <<toggleclass $current "current">> */
   <<set $current to "l">>
    <<if $current is "l">> 
    <<replace "#clueMount">>
        /* Make box gold, turn off any other gold boxes */
         <<addclass "#letterItemL" "current">> 
        <<removeclass "#letterItemA" "current">>   
        <<removeclass "#letterItemC" "current">>   
        <<removeclass "#letterItemY" "current">> 
      <h2 class="octo-title">Clue</h2>
       <p>There is a clock near the library exit - underneath a name of someone who opened the Library - enter the 2nd letter of the Surname.</p>

    <</replace>>
  
    <<replace "#inputMount">>
        <div id="coderesult"></div>
    
        <div class="code-input"><<textbox "$l" "">></div>
        <<button "Enter">>
       
        /% PASSWORD CODE %/
        <<set $l to $l.toUpperCase().trim()>>
        /% CODEWORD CORRECT %/
        <<if $l isnot "" and $l is "L">>
        <<timed 0.1s>>
         <<replace "#coderesult">><div class="confirmation" id="confirmation">Correct!</div><</replace>>
        <</timed>>
        <<audio "correct" play>>
        <<timed 1s>>
            <<run $correctans.push("L")>>
            <<include "checkcorrectans">>
            <<replace "#letterItemL">><div class="correct-letter">L</div>
            <</replace>>
            <<replace "#inputMount">><</replace>>
             <<replace "#clueMount">><</replace>>
        <</timed>>
        <</if>>
        /% CODEWORD INCORRECT %/
        <<if $l isnot "" and $l isnot "L">>
        <<timed 0.1s>>
           <<audio "error" play>>
          <<replace "#coderesult">><div class="confirmation" id="confirmation">That's not right...</div><</replace>>
         <</timed>>
        <<timed 1.5s>><<replace "#coderesult">><</replace>><</timed>>
        <</if>><</button>>
    <</replace>>
   <</if>>   

  <</link>>
</div>
/* Letter A  */
<div class="letter-item a" id="letterItemA">
  <<link "2">>

   <<set $current to "a">>
    <<if $current is "a">> 
    <<replace "#clueMount">>
        /* Make box gold, turn off any other gold boxes */
         <<removeclass "#letterItemL" "current">> 
        <<addclass "#letterItemA" "current">>   
        <<removeclass "#letterItemC" "current">>   
        <<removeclass "#letterItemY" "current">>   
    <h2 class="octo-title">Clue</h2>
       <p>Shakespeare’s quote is on a wall - high up above a door - find it and enter the first letter of the quote.</p>
    <</replace>>
    <<replace "#inputMount">>
        <div id="coderesult"></div>
        <div class="code-input"><<textbox "$a" "">></div>
        <<button "Enter">>
       
        /% PASSWORD CODE %/
        <<set $a to $a.toUpperCase().trim()>>
        /% CODEWORD CORRECT %/
        <<if $a isnot "" and $a is "A">>
        <<replace "#coderesult">><div class="confirmation" id="confirmation">Correct!</div><</replace>>
         <<audio "correct" play>>
        <<run $correctans.push("A")>>
            <<include "checkcorrectans">>
        <<timed 1s>>
            <<replace "#letterItemA">><div class="correct-letter">A</div>
            <</replace>>
            <<replace "#inputMount">><</replace>>
             <<replace "#clueMount">><</replace>>
        <</timed>>
        <</if>>
        /% CODEWORD INCORRECT %/
        <<if $a isnot "" and $a isnot "A">>
           <<audio "error" play>>
        <<replace "#coderesult">><div class="confirmation" id="confirmation">That's not right...</div><</replace>>
        <<timed 1.5s>><<replace "#coderesult">><</replace>><</timed>>
        <</if>><</button>>
    <</replace>>
   <</if>>   
   /* <<toggleclass "#sclue" "hide">> */
  <</link>>
</div>
/* Letter L  */
<div class="letter-item l" id="letterItemC">
  <<link "3">>
   /* <<textbox "$s" "">> */
   /* <<toggleclass $current "current">> */
   <<set $current to "l">>
    <<if $current is "l">> 
    <<replace "#clueMount">>
        /* Make box gold, turn off any other gold boxes */
         <<removeclass "#letterItemL" "current">> 
        <<removeclass "#letterItemA" "current">>   
        <<addclass "#letterItemC" "current">>   
        <<removeclass "#letterItemY" "current">>
    <h2 class="octo-title">Clue</h2>
       <p>Far on the other side of the Library there is an area for Kids’ what is the name of this area - Kids ??????. Enter the first letter of that word. </p>
    <</replace>>
    <<replace "#inputMount">>
        <div id="coderesult"></div>
        <div class="code-input"><<textbox "$c" "">></div>
        <<button "Enter">>
       
        /% PASSWORD CODE %/
        <<set $c to $c.toUpperCase().trim()>>
        /% CODEWORD CORRECT %/
        <<if $c isnot "" and $c is "C">>
        <<replace "#coderesult">><div class="confirmation" id="confirmation">Correct!</div><</replace>>
         <<audio "correct" play>>
        <<timed 1s>>
            <<run $correctans.push("C")>>
            <<include "checkcorrectans">>
            <<replace "#letterItemC">><div class="correct-letter">C</div>
            <</replace>>
            <<replace "#inputMount">><</replace>>
             <<replace "#clueMount">><</replace>>
        <</timed>>
        <</if>>
        /% CODEWORD INCORRECT %/
        <<if $c isnot "" and $c isnot "C">>
           <<audio "error" play>>
        <<replace "#coderesult">><div class="confirmation" id="confirmation">That's not right...</div><</replace>>
        <<timed 1.5s>><<replace "#coderesult">><</replace>><</timed>>
        <</if>><</button>>
    <</replace>>
   <</if>>   
   /* <<toggleclass "#sclue" "hide">> */
  <</link>>
</div>


/* Letter Y  */
<div class="letter-item y" id="letterItemY">
  <<link "4">>
   /* <<textbox "$s" "">> */
   /* <<toggleclass $current "current">> */
   <<set $current to "y">>
    <<if $current is "y">> 
    <<replace "#clueMount">>
        /* Make box gold, turn off any other gold boxes */
         <<removeclass "#letterItemL" "current">> 
        <<removeclass "#letterItemA" "current">>   
        <<removeclass "#letterItemC" "current">>   
        <<addclass "#letterItemY" "current">>   
    <h2 class="octo-title">Clue</h2>
       <p>Between the Exit and the Shakespeare quote - an Ark can be found - a Sound Ark - what is the last letter of the first word of this Sound Ark? </p>
    <</replace>>
    <<replace "#inputMount">>
        <div id="coderesult"></div>
        <div class="code-input"><<textbox "$y" "">></div>
        <<button "Enter">>
       
        /% PASSWORD CODE %/
        <<set $y to $y.toUpperCase().trim()>>
        /% CODEWORD CORRECT %/
        <<if $y isnot "" and $y is "Y">>
        <<replace "#coderesult">><div class="confirmation" id="confirmation">Correct!</div><</replace>>
         <<audio "correct" play>>
        <<timed 1s>>
            <<run $correctans.push("Y")>>
            <<include "checkcorrectans">>
            <<replace "#letterItemY">><div class="correct-letter">Y</div>
            <</replace>>
            <<replace "#inputMount">><</replace>>
             <<replace "#clueMount">><</replace>>
        <</timed>>
        <</if>>
        /% CODEWORD INCORRECT %/
        <<if $y isnot "" and $y isnot "Y">>
           <<audio "error" play>>
        <<replace "#coderesult">><div class="confirmation" id="confirmation">That's not right...</div><</replace>>
        <<timed 1.5s>><<replace "#coderesult">><</replace>><</timed>>
        <</if>><</button>>
    <</replace>>
   <</if>>   

  <</link>>
</div>
</div>
<br>
 <div id="clueMount">
    <span>4 letters to find.</span>
  </div>
<br>
<div id="inputMount"></div>
<br>
<br>


</main>
<<include "footer">>


:: checkcorrectans

<<if $correctans.includesAll("L", "A", "C", "Y")>>

<<timed 3s>>
  <<goto $nextpass>>
  <</timed>>
<</if>>



:: ger3-1 [nobr]
<<set $prevpass to "code4">>
<<set $pass to "ger3-1">>
<<set $nextpass to "wordsAdded1">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>


:: ger3-1-messages [nobr]
<<timed 0.5s>>
        <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>LACY</p>
       </div>
        <</append>>
    <</timed>>

    <<timed 3s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
        <p>That’s it - Mary Lacy!</p>
       </div>
        <</append>>
    <</timed>>

   <<timed 7s>>
    <<goto $nextpass>>
    <</timed>>

:: wordsAdded1 [nobr]
<<set $prevpass to "ger3-1">>
<<set $pass to "wordsAdded1">>
<<set $nextpass to "ger3-2">>
<div id="audio"></div>
<main>
    
  <div class="eating-container">
    <p>
      <span class="keep remaining">Women</span> <span class="eaten">were</span> <span class="eaten">some</span> <span class="eaten">of</span> <span class="eaten">the</span> <span class="eaten">hidden</span> <span class="eaten">heroines</span> <span class="eaten">of</span> <span class="eaten">the</span> <span class="eaten">Navy</span>
    </p>
    <p>
      <span class="eaten">Some</span> <span class="eaten">would</span> <span class="eaten">mend</span> <span class="eaten">ships,</span> <span class="eaten">some</span> <span class="eaten">would</span> <span class="eaten">make</span> <span class="eaten">ropes</span>
    </p>
    <p>
      <span class="eaten">Some</span> <span class="eaten">even</span> <span class="eaten">dressed</span> <span class="eaten">like</span> <span class="eaten">men</span> <span class="eaten">to</span> <span class="eaten">fight</span> <span class="eaten">in</span> <span class="eaten">the</span> <span class="eaten">war</span>
    </p>
    <p>
  <span class="eaten">Mary</span> <span class="eaten">Lacy</span> <span class="eaten">travelled</span> <span class="eaten">to</span> <span class="eaten">Chatham</span> <span class="eaten">in</span> <span class="eaten">her</span> <span class="eaten">fathers’</span> <span class="eaten">clothes</span> <span class="eaten">and</span> <span class="eaten">she</span> <span class="eaten">became</span> <span class="eaten">William</span> <span class="eaten">Chandler</span>
</p>
<p>
  <span class="eaten">Not</span> <span class="eaten">long</span> <span class="eaten">after</span> <span class="eaten">that,</span><span class="eaten">she</span> <span class="eaten">joined</span> <span class="eaten">the</span> <span class="eaten">HMS</span> <span class="keep remaining">Sandwich</span> <span class="eaten">and</span> <span class="eaten">set</span> <span class="eaten">sail</span>
</p>
<p>
  <span class="eaten">Although</span> <span class="eaten">they</span> <span class="eaten">didn't</span> <span class="eaten">know</span> <span class="eaten">she</span> <span class="eaten">was</span> <span class="eaten">a</span> <span class="eaten">‘she’</span> <span class="eaten">at</span> <span class="eaten">the</span> <span class="eaten">time</span>
</p>
<p>
  <span class="eaten">She</span> <span class="eaten">fought</span> <span class="eaten">in</span> <span class="eaten">wars</span> <span class="eaten">and</span> <span class="eaten">survived</span> <span class="eaten">hurricanes</span><span class="eaten">!</span>
</p>
<p>
  <span class="eaten">She</span> <span class="eaten">stayed</span> <span class="eaten">in</span> <span class="keep remaining">disguise</span> <span class="eaten">for</span> <span class="eaten">many</span> <span class="eaten">years</span> <span class="eaten">until</span> <span class="eaten">her</span> <span class="eaten">identity</span> <span class="eaten">was</span> <span class="eaten">revealed</span> <span class="eaten">and</span> <span class="eaten">she</span> <span class="eaten">was</span> <span class="eaten">discharged</span><span class="eaten">.</span>
  <br/><br/>
</p>
<br/><br/>
  </div>


</main>

<<include "footerwords">>

<<done>>
  <<set $still to setup.restoreWords()>>
<</done>>

<<timed 0.5s>>
  <<replace "#audio">>
    <audio src="assets/audio/WomaninDisguise.mp3" autoplay>Audio is not supported on your device</audio>
    <</replace>>
<</timed>>
:: ger3-2 [nobr]
<<set $prevpass to "wordsAdded1">>
<<set $pass to "ger3-2">>
<<set $nextpass to "ger3-3">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>


:: ger3-2-messages [nobr]
<<timed 0.1s>>
        <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>Mary Lacy travelled to Chatham in her fathers’ clothes and she became William Chandler.</p>
       </div>
        <</append>>
    <</timed>>

    <<timed 3s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
        <p>Not long after that, she joined the HMS Sandwich and set sail. </p>
       </div>
        <</append>>
    <</timed>>

    <<timed 5s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
        <p>Although they didn't know she was a ‘she’ at the time. </p>
       </div>
        <</append>>
    <</timed>>



   <<timed 7s>>
      <<replace "#nextButtonContainer">>
      <<button "Next">>
          <<goto $nextpass>>
        <</button>>
          <</replace>>
    <</timed>>


:: ger3-3 [nobr]
<<set $prevpass to "ger3-2">>
<<set $pass to "ger3-3">>
<<set $nextpass to "ger3-4">>

<<include "_templateGeraldine">>


:: ger3-3-messages [nobr]
<<timed 0.1s>>
        <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>She fought in wars and survived hurricanes!</p>
       </div>
        <</append>>
    <</timed>>

    <<timed 3s>>
    <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
        <p>She stayed in disguise for many years until her identity was revealed and she was discharged. </p>
       </div>
        <</append>>
    <</timed>>

   <<timed 5s>>
      <<replace "#nextButtonContainer">>
      <<button "Next">>
          <<goto $nextpass>>
        <</button>>
          <</replace>>
    <</timed>>

:: ger3-4 [nobr]
<<set $prevpass to "ger3-3">>
<<set $pass to "ger3-4">>
<<set $nextpass to "ger3-5">>

<<include "_templateGeraldine">>


:: ger3-4-messages [nobr]
<<timed 0.1s>>
        <<audio "ping1" "play">>
        <<append "#msgMount">>
       <div class="message"> 
          <p>It is said that Lacy had one of the most successful careers as a woman in disguise, even gaining a pension from Admiralty in her true name.</p>
       </div>
        <</append>>
    <</timed>>

   

   <<timed 3s>>
      <<replace "#nextButtonContainer">>
      <<button "Next">>
          <<goto "bookrooting">>
        <</button>>
          <</replace>>
    <</timed>>


:: bookrooting [nobr]
<<audio "rooting" play>>
<main class="rooting">
  <div class="book-wrapper wobble-animation">
  <img src="/assets/img/bookflat.png" alt="open book"/>
  </div>
  <div id="mount"></div>
  <<timed 0.3s>>
  <<replace "#mount">>
      <<type 80ms>>
<h2 class="octo-title">Book Rooting...</h2>
<</type>>
  <</replace>>
<</timed>>
</main>

  <<timed 6s>>
  
          <<goto $nextpass>>
    
    <</timed>>

:: ger3-5 [nobr]
<<set $prevpass to "ger3-4">>
<<set $pass to "ger3-5">>
<<set $nextpass to "ger3-6">>

<<include "_templateGeraldine">>

:: ger3-5-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>I’m going to be honest I have been a bit nervous about starting this job.</p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>I was doubting myself.</p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>But Mary’s story is so inspirational.</p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Maybe it’ll be ok.</p>
       </div>
    <</append>>
<</timed>>

<<timed 12s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>One chapter rooted.</p>
       </div>
    <</append>>
<</timed>>

<<timed 15s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto "roar">>
    <</button>>
    <</replace>>
<</timed>>

:: roar [nobr]
<<addclass "body" "light">>

<main class="roar swirlroar ">
   <div class="swipe-wrapper "> 
    <img src="/assets/img/swipe.png" alt="logo" /></div>
   <span class="swipe-word one" >MENAGERIE</span>
  <span class="swipe-word two" >SANDWICH</span>
  <span class="swipe-word three" >DETONATION</span>
   <span class="swipe-word four" >DISGUISE</span>
  <span class="swipe-word five" >MINES</span>
   <span class="swipe-word six" >MENAGERIE</span>
  <span class="swipe-word seven" >SANDWICH</span>
  <span class="swipe-word eight" >CAGE</span>
</main>



<<if previous() is "ger3-5">>
  <<audio "monster1" play>>
  <<timed 7s>>
      <<goto $nextpass>>
    <</timed>>
  <<elseif previous() is "wordsLeft2">>
    <<audio "monster2" play>>
    <<timed 9s>>
      <<goto $nextpass>>
    <</timed>>
  <<elseif previous() is "ger8-1">>
     <<audio "monster3" play>>
     <<timed 7s>>
      <<goto $nextpass>>
    <</timed>>
   <<elseif previous() is "ger14-3">>
     <<audio "monster4" play>>
     <<timed 3s>>
      <<goto $nextpass>>
    <</timed>>
  <</if>>




:: ger3-6 [nobr]
<<set $prevpass to "ger3-5">>
<<set $pass to "ger3-6">>
<<set $nextpass to "chapterTitle2">>

<<include "_templateGeraldine">>

:: ger3-6-messages [nobr]

<<timed 0.5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>But I think the Book Monster now knows what we are trying to do.</p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Do we call it Book Monster or Googly Moogly!?</p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>To start the next chapter, head to the refreshments area, have a hot chocolate if you’d like!</p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>When there click below</p>
       </div>
    <</append>>
<</timed>>

<<timed 12s>>
    <<replace "#nextButtonContainer">>
    <<button "Here">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>


:: chapterTitle2 [nobr]
<<set $prevpass to "ger3-6">>
<<set $pass to "chapterTitle2">>
<<set $nextpass to "wordsLeft2">>
<<set $currentChapter to 2>>
<<audio ":all" stop>>
<div id="audio"> <audio src="assets/audio/NewChapterSound2.mp3" autoplay>Audio is not supported on your device</audio></div>
<<include "_chapterTitleTemplate">>
<<include "footerintro">>

:: wordsLeft2 [nobr]
<<set $prevpass to "chapterTitle2">>
<<set $pass to "wordsLeft2">>
<<set $nextpass to "ger4-1">>
    <<audio "wordeat" "play" loop>>
 <main>
     <div class="eating-container">
   <p>
  <span>In</span> <span>1850,</span> <span>17-year-old</span> <span>Ellen</span> <span>Bright</span> <span>who</span> <span>was</span> <span>dubbed</span> <span>the</span> <span>Lion</span> <span>Queen</span> <span>died</span> <span>in</span> <span>Chatham</span> <span>during</span> <span>her</span> <span>act</span> <span>with</span> <span>a</span> <span>Lion.</span>
</p>
<p>
  <span>She</span> <span>tamed</span> <span>the</span> <span>Lion</span> <span>but</span> <span>was</span> <span>attacked</span> <span>by</span> <span>a</span> <span class="keep">Tiger</span> <span>who</span> <span>was</span> <span>also</span> <span>in</span> <span>the</span> <span class="keep">cage</span>
</p>
<p>
  <span>Her</span> <span>final</span> <span>performance</span> <span>was</span> <span>part</span> <span>of</span> <span class="keep">‘Wombwell’s</span> <span class="keep">Travelling</span> <span class="keep">Menagerie’</span> <span>which</span> <span>toured</span> <span>the</span> <span>country</span> <span>exhibiting</span> <span>elephants,</span> <span>giraffes,</span> <span>tigers,</span> <span>panthers,</span> <span>lions,</span> <span>a</span> <span>gorilla,</span> <span>and</span> <span>a</span> <span>kangaroo.</span>
</p>
</div>

</main>

<<include "footerwords">>

<<done>>
<<set $move to setup.quickEatWords()>>
<</done>>


<<timed 10s>>
  <<goto "roar">>
  <</timed>>

:: ger4-1 [nobr]
<<set $prevpass to "wordsLeft2">>
<<set $pass to "ger4-1">>
<<set $nextpass to "mapInstructions">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>

:: ger4-1-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>Keep your eyes focused forward and follow the instructions.</p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>You need to follow the map and I’ll get you out. </p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>We are in the Monster’s Cage - the Library and we need to get out. </p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Don’t look Googly Moogly in the eyes if you see them. </p>
       </div>
    <</append>>
<</timed>>

<<timed 12s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>


:: mapInstructions [nobr]
<<set $prevpass to "ger4-1">>
<<set $pass to "mapInstructions">>
<<set $nextpass to "ger5-1">>
<<addclass "body" "light">>
<<audio "LQintensity1" play loop>>
<<set $currentInstructionIndex = 1>>

<<set $instructions = {
  0:{ text: "", 
    coords: ""
  },
    1: { text: "Face the vending machines <br/>
Don’t turn around – I need to work out where the Book Monster is.  <br/>
We can’t see it – but trust me – we want to avoid it.
", coords: "one"},
 2: { text: "Walk backwards down the central aisle.<br/> Don't turn around.", coords: "two" }, 
  3: { text: "HOLD IT.<br/>
The Book Monster.<br/>
We need to go a different route. Re-routing.", coords: "two" }, 
  4: { text: "Make your way towards the wall.", coords: "four" }, 
   5: { text: "Walk along the wall towards reception - past the Jigsaws.<br/>
   Stop before the reception - it’s too open there.", coords: "five" }, 
  6: { text: "We’re going to make a dash for it. You are going to go to the Poetry Corner.<br/> Get ready. 3.. 2.. 1.. Go!", coords: "seven"},  
  7: { text: "Head out the door and out of the cage <br/>Walk along the wall as you exit the Library. Enter the word on the wall on the left side to let me know you have made it out alive!", 
  coords: "eight"}
}>>
  <<set $position to $instructions[$currentInstructionIndex].coords >>

<header class="map">
 <h2 class="octo-title">Monster's Cage</h2>
</header>
	<main id="main" class="map">

	<div>
<div class="map-container" id="mapContainer">
<img src="assets/img/map.png"/>
<div class="location one pulse" id="location">
<img src="/assets/img/arrow.png" src="arrow"/></div>






/* <<include "swirlbookmonster6">>
<<include "swirlbookmonster7">>
<<include "swirlbookmonster8">> */

</div>
	</div>
   <div class="instruction" id="instruction">
 
    <p class="message">
    /* <<print $currentInstructionIndex>>. */
    <<print $instructions[$currentInstructionIndex].text>></p>
    
    </div>

	</main>
	<<include "footermap">>


:: swirlbookmonster1 [nobr]
<div class="swirling-fog swirl-position-one">
  <span class="swirl-word one" >MENAGERIE</span>
  <span class="swirl-word two" >SANDWICH</span>
  <span class="swirl-word three" >DETONATION</span>
</div>

:: swirlbookmonster2 [nobr]
<div class="swirling-fog swirl-position-two">
  <span class="swirl-word one" >WOMAN</span>
  <span class="swirl-word two" >SANDWICH</span>
  <span class="swirl-word three" >MENAGERIE</span>
</div>

:: swirlbookmonster3 [nobr]
<div class="swirling-fog swirl-position-three">
  <span class="swirl-word one" >DETONATION</span>
  <span class="swirl-word two" >DISGUISE</span>
  <span class="swirl-word three" >MINES</span>
</div>

:: swirlbookmonster4 [nobr]
<div class="swirling-fog swirl-position-four">
  <span class="swirl-word one" >MENAGERIE</span>
  <span class="swirl-word two" >SANDWICH</span>
  <span class="swirl-word three" >DETONATION</span>
</div>

:: swirlbookmonster5 [nobr]
<div class="swirling-fog swirl-position-five">
  <span class="swirl-word one" >MENAGERIE</span>
  <span class="swirl-word two" >SANDWICH</span>
  <span class="swirl-word three" >CAGE</span>
</div>

:: swirlbookmonster6 [nobr]
<div class="swirling-fog swirl-position-six">
  <span class="swirl-word one" >ELEPHANT</span>
  <span class="swirl-word two" >SANDWICH</span>
  <span class="swirl-word three" >DETONATION</span>
</div>

:: swirlbookmonster7 [nobr]
<div class="swirling-fog swirl-position-seven">
  <span class="swirl-word one" >CAGE</span>
  <span class="swirl-word two" >SANDWICH</span>
  <span class="swirl-word three" >ELEPHANT</span>
</div>

:: swirlbookmonster8 [nobr]
<div class="swirling-fog swirl-position-eight">
  <span class="swirl-word one" >MURAL</span>
  <span class="swirl-word two" >BIG BEN BELL</span>
  <span class="swirl-word three" >DETONATION</span>
</div>
<div class="swirling-fog swirl-position-nine">
  <span class="swirl-word one" >MENAGERIE</span>
  <span class="swirl-word two" >TIGER</span>
  <span class="swirl-word three" >WOMAN</span>
</div>


:: footermap [nobr]

<footer class="map">
<<button "Back">><<goto $prevpass>><</button>>

<span class="button-wrapper" id="btnMount" aria-label="Click a button or link to move on">

<<button "I'm ready">>
<<set $currentInstructionIndex += 1>>
<<if $currentInstructionIndex === 1>>

  <<timed 1s>>
    <<removeclass "#location" "hide">>
      <<addclass "#location" "one">>
       <<include "updateInstruction">>
      <</timed>>
   <<timed 5s>>
    <<removeclass "#btnMount" "hide">>
    <</timed>>
<</if>>
 <<if $currentInstructionIndex === 2 >>
   <<timed 1s>>
     <<include "updateInstruction">>
  <</timed>>
  <<timed 7s>>
    <<removeclass "#btnMount" "hide">>
    <</timed>>
<<elseif $currentInstructionIndex === 3 >>
/* TODO ADD BOOK Monster */
    <<timed 0.1s>>
      <<append "#mapContainer">>
      <<include "swirlbookmonster1">>
      <<audio "monster3" play>>
      <</append>>
      <<include "updateInstruction">>
    <</timed>>
    <<timed 4s>>
    <<removeclass "#btnMount" "hide">>
    <</timed>>
<<elseif $currentInstructionIndex === 4 >>
    <<timed 0.1s>>
      <<include "updateInstruction">>
    <</timed>>
     <<timed 3.5s>>
       <<append "#mapContainer">>
      <<include "swirlbookmonster2">>
      <</append>>
    <</timed>>
    <<timed 4s>>
    <<removeclass "#btnMount" "hide">>
    <</timed>>
<<elseif $currentInstructionIndex === 5 >>
    <<timed 0.1s>>
      <<include "updateInstruction">>
    <</timed>>
     <<timed 3.5s>>
       <<append "#mapContainer">>
      <<include "swirlbookmonster3">>
      <</append>>
    <</timed>>
    <<timed 4s>>
    <<removeclass "#btnMount" "hide">>
    <</timed>>
<<elseif $currentInstructionIndex === 6 >>
    <<timed 0.1s>>
      <<include "updateInstruction">>
    <</timed>>
     <<timed 3.5s>>
       <<append "#mapContainer">>
      <<include "swirlbookmonster4">>
        <<include "swirlbookmonster5">>
          <<include "swirlbookmonster6">>
      <</append>>
    <</timed>>
    <<timed 4s>>
    <<removeclass "#btnMount" "hide">>
    <</timed>>
<<elseif $currentInstructionIndex === 7 >>
    <<timed 0.1s>>
      <<include "updateInstruction">>
    <</timed>>
     <<timed 3.5s>>
       <<append "#mapContainer">>
    
          <<include "swirlbookmonster7">>
      <<include "swirlbookmonster8">>
      <</append>>
    <</timed>>
    <<timed 4s>>
        <<replace "#btnMount">>
      <<include "pwMap">>
      <</replace>>
    <<removeclass "#btnMount" "hide">>
    <</timed>>
  
  <</if>>

<</button>>
</span>
</footer>

:: pwMap [nobr]

<div class="css-input map-input">
    <div class="result-input-wrapper">
      <div id="coderesult"></div>
      <<textbox "$codeword" "">>
    </div>
    <<button "Enter">>
      <<set $codeword to $codeword.toUpperCase().trim()>>
      
      /% CODEWORD CORRECT %/
      <<if $codeword isnot "" and $codeword is "ENTRANCE">>
        <<replace "#coderesult">><span>CORRECT</span><</replace>>
        <<audio ":all" stop>>
        <<audio "correct" play>>

        <<timed 3s>><<goto $nextpass>><</timed>>
      <</if>>
      /% CODEWORD INCORRECT %/
       <<if _password isnot "" and $codeword isnot "ENTRANCE">>
        <<replace "#coderesult">><span>That's not right.</span><</replace>>
        <<timed 1.5s>><<replace "#coderesult">><</replace>><</timed>>
      <</if>>
    <</button>>

    
    <br/>
</div>
    

:: updateInstruction [nobr]
  <<addclass "#btnMount" "hide">>
  <<timed 0.1s>>
     <<replace "#instruction">>
      <</replace>>
  <</timed>>
  <<timed 1s>>
  <<replace "#instruction">>
   <h3>Instruction</h3>

    <p class="message"><<print $instructions[$currentInstructionIndex].text>></p>
  <</replace>>
  <</timed>>
 <<timed 3s>>
  <<removeclass "#location" $position>>
  <<set $position to $instructions[$currentInstructionIndex].coords >>
  <<addclass "#location" $position >>
<</timed>>


:: ger5-1 [nobr]
<<set $prevpass to "mapInstructions">>
<<set $pass to "ger5-1">>
<<set $nextpass to "wordsAdded2">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>

:: ger5-1-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>You made it.</p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>And unlocked the story in the chapter too.</p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Oh.</p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Well this is sad.</p>
       </div>
    <</append>>
<</timed>>

<<timed 12s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>I’m sorry to say that, although we made it out of the cage, the Lion Queen did not.</p>
       </div>
    <</append>>
<</timed>>

<<timed 15s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>



:: wordsAdded2 [nobr]
<<set $prevpass to "ger5-1">>
<<set $pass to "wordsAdded2">>
<<set $nextpass to "ger5-2">>
<div id="audio"></div>
<main class="main-words added">
 <div class="eating-container">
   <p>
  <span class="eaten">In</span> <span class="eaten">1850,</span> <span class="eaten">17-year-old</span> <span class="eaten">Ellen</span> <span class="eaten">Bright</span> <span class="eaten">who</span> <span class="eaten">was</span> <span class="eaten">dubbed</span> <span class="eaten">the</span> <span class="eaten">Lion</span> <span class="eaten">Queen</span> <span class="eaten">died</span> <span class="eaten">in</span> <span class="eaten">Chatham</span> <span class="eaten">during</span> <span class="eaten">her</span> <span class="eaten">act</span> <span class="eaten">with</span> <span class="eaten">a</span> <span class="eaten">Lion.</span>
</p>
<p>
  <span class="eaten">She</span> <span class="eaten">tamed</span> <span class="eaten">the</span> <span class="eaten">Lion</span> <span class="eaten">but</span> <span class="eaten">was</span> <span class="eaten">attacked</span> <span class="eaten">by</span> <span class="eaten">a</span> <span class="keep remaining">Tiger</span> <span class="eaten">who</span> <span class="eaten">was</span> <span class="eaten">also</span> <span class="eaten">in</span> <span class="eaten">the</span> <span class="keep remaining">cage</span>
</p>
<p>
  <span class="eaten">Her</span> <span class="eaten">final</span> <span class="eaten">performance</span> <span class="eaten">was</span> <span class="eaten">part</span> <span class="eaten">of</span> <span class="keep remaining">‘Wombwell’s</span> <span class="keep remaining">Travelling</span> <span class="keep remaining">Menagerie’</span> <span class="eaten">which</span> <span class="eaten">toured</span> <span class="eaten">the</span> <span class="eaten">country</span> <span class="eaten">exhibiting</span> <span class="eaten">elephants,</span> <span class="eaten">giraffes,</span> <span class="eaten">tigers,</span> <span class="eaten">panthers,</span> <span class="eaten">lions,</span> <span class="eaten">a</span> <span class="eaten">gorilla,</span> <span class="eaten">and</span> <span class="eaten">a</span> <span class="eaten">kangaroo.</span>
</p>
</div>

</main>
<<include "footerwords">>

<<done>>
  <<set $still to setup.restoreWords()>>
<</done>>
<<timed 0.5s>>
  <<replace "#audio">>
    <audio src="assets/audio/LionQueen.mp3" autoplay>Audio is not supported on your device</audio>
    <</replace>>
<</timed>>

:: ger5-2 [nobr]
<<set $prevpass to "wordsAdded2">>
<<set $pass to "ger5-2">>
<<set $nextpass to "chapterTitle3">>

<<include "_templateGeraldine">>

:: ger5-2-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>Wow - that is a sad story.</p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>A fearless woman.</p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>But one we will remember now.</p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Because we have rooted her story here.</p>
       </div>
    <</append>>
<</timed>>

<<timed 12s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Ellen Bright - the Lion Queen. </p>
       </div>
    <</append>>
<</timed>>

<<timed 15s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Well done.</p>
       </div>
    <</append>>
<</timed>>

<<timed 18s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>And we have escaped the Googly Moogly’s Cage. </p>
       </div>
    <</append>>
<</timed>>

<<timed 21s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>We’ll be safe out here but we need to root the book soon. </p>
       </div>
    <</append>>
<</timed>>

<<timed 24s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Let’s keep going.</p>
       </div>
    <</append>>
<</timed>>


<<timed 26s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto "bookrooting">>
    <</button>>
    <</replace>>
<</timed>>

:: chapterTitle3 [nobr]
<<set $prevpass to "ger5-2">>
<<set $pass to "chapterTitle3">>
<<set $nextpass to "wordsLeft3">>
<<set $currentChapter to 3>>
<<audio ":all" stop>>
<div id="audio"> <audio src="assets/audio/NewChapterSound3.mp3" autoplay>Audio is not supported on your device</audio></div>
<<include "_chapterTitleTemplate">>
<<include "footerintro">>

:: wordsLeft3 [nobr]
<<set $prevpass to "chapterTitle3">>
<<set $pass to "wordsLeft3">>
<<set $nextpass to "ger6-1">>
<<audio "wordeat" play loop>>

<main>
<div class="eating-container">
   <p>
  <span>It</span> <span>was</span> <span>in</span> <span>1949</span> <span>-</span> <span>a</span> <span>narwhal</span> <span>-</span> <span>considered</span> <span>a</span> <span>‘Sea</span> <span>Unicorn’</span> <span>because</span> <span>of</span> <span>its</span> <span>long</span> <span>tusk</span> <span>-</span> <span>washed</span> <span>up</span> <span>along</span> <span>the</span> <span class="keep">River Medway</span>
</p>
<p>
  <span>Many</span> <span>myths</span> <span>and</span> <span>legends</span> <span>are</span> <span>based</span> <span>on</span> <span>misunderstood</span> <span>sightings</span> <span>of</span> <span>real</span> <span class="keep">creatures</span>
</p>
<p>
  <span>But</span> <span>they</span> <span>normally</span> <span>are</span> <span>found</span> <span>in</span> <span>the</span> <span class="keep">arctic</span> <span>-</span> <span>so</span> <span>finding</span> <span>one</span> <span>here</span> <span>was</span> <span>incredibly</span> <span>rare.</span>
</p>
<p>
  <span>It</span> <span>was</span> <span>so</span> <span>rare</span> <span>that</span> <span>it</span> <span>is</span> <span>now</span> <span>documented</span> <span>in</span> <span>the</span> <span>Natural</span> <span>History</span> <span>Museum</span> <span>in</span> <span>London.</span>
</p>
</div>
</main>

<<include "footerwords">>

<<done>>
<<set $move to setup.quickEatWords()>>
<</done>>



<<timed 10s>>
  <<goto $nextpass>>
  <</timed>>


:: ger6-1 [nobr]
<<set $prevpass to "wordsLeft3">>
<<set $pass to "ger6-1">>
<<set $nextpass to "ger6-2a">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>

:: ger6-1-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>The next chapter seems to be linked to the River Medway. </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Let’s head there. </p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Go to the Red Lifeguard Ring and let me know when you are there. </p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<replace "#nextButtonContainer">>
    <<button "I'm here">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: ger6-2a [nobr]
<<set $prevpass to "ger6-1">>
<<set $pass to "ger6-2a">>
<<set $nextpass to "ger6-2b">>

<<include "_templateGeraldine">>


:: ger6-2a-messages [nobr]
<<timed 0.5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>Something has been bothering me - why don’t we know who the author is?</p>
       </div>
    <</append>>
<</timed>>


<<timed 4s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: ger6-2b [nobr]
<<set $prevpass to "ger6-2a">>
<<set $pass to "ger6-2b">>
<<set $nextpass to "ger6-2c">>

<<include "_templateGeraldine">>

:: ger6-2b-messages [nobr]

<<timed 0.5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Come on Geraldine, focus, this is no time to ponder.</p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>OCTOPUS need you to focus. </p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: ger6-2c [nobr]
<<set $prevpass to "ger6-2b">>
<<set $pass to "ger6-2c">>
<<set $nextpass to "ger6-3">>

<<include "_templateGeraldine">>

:: ger6-2c-messages [nobr]

<<timed 0.5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>I love the River.</p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>The river changes.</p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Much like us.</p>
       </div>
    <</append>>
<</timed>>

<<timed 8s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>It is said you can’t stand in the same river twice.</p>
       </div>
    <</append>>
<</timed>>

<<timed 11s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Some say you can’t even stand in the same river once.</p>
       </div>
    <</append>>
<</timed>>

<<timed 14s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Because it changes constantly.</p>
       </div>
    <</append>>
<</timed>>

<<timed 17s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>



:: ger6-3 [nobr]
<<set $prevpass to "ger6-2b">>
<<set $pass to "ger6-3">>
<<set $nextpass to "picUpload">>

<<include "_templateGeraldine">>

:: ger6-3-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>The next ROOTING Challenge seems to be that you need to spot something.</p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Something interesting that you can see.</p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Something that catches your attention.</p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Whatever you think is the most interesting sight on the river. </p>
       </div>
    <</append>>
<</timed>>

<<timed 12s>>
    <<replace "#nextButtonContainer">>
    <<button "Upload Picture">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: headerUpload [nobr]
<header class="intro">
  <div class="logo-wrapper ">
  <img src="/assets/img/logo.png" alt="logo"/>
  </div>
  <div class="octo-title-wrapper">
    <h2 class="octo-title">OCTOPUS</h2>
    <span>Upload</span>
  </div>
</header>

:: picUpload [nobr]
<<set $prevpass to "ger6-3">>
<<set $pass to "picUpload">>
<<set $nextpass to "ger7-1">>
<<include "headerUpload">>
<main class="main-section upload">

<div id="uploadInstructions">
  <h3>Find a spot out to the river</h3>
  <h3>Upload an image of something interesting </h3>
</div>

<div class="logo-wrapper loading" id="loadingLogo">
<img src="/assets/img/logo.png" alt="logo" class="fastRotate"/>
<br/>
<h2 class="octo-title">Uploading...</h2>
</div>
<br>
<input type="file" accept="image/*" capture="camera" id="inputImg" class="hide">
<br>
<div id="success">
<<button "Upload Image">>
  <<set $e to setup.handleFileUpload()>><</button>>
</div>
  <br>
  <br>
  <div id="error"></div>

</main> 
<<include "footerupload">>

:: footerupload [nobr]
<footer id="footerField"><<button "Back">><<goto $prevpass>><</button>>
</footer>
<<timed 12s>>
    <<append "#footerField">>
  <<button "Move on">> <<goto $nextpass>><</button>>
    <</append>><</timed>>

:: ger7-1 [nobr]
<<set $prevpass to "picUpload">>
<<set $pass to "ger7-1">>
<<set $nextpass to "wordsAdded3a">>

<<include "_templateGeraldine">>

:: ger7-1-messages [nobr]

<<timed 0.5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message">
       <p>Upload complete!</p>
       </div>
    <</append>>
<</timed>>


<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message">
       <p>You seem to have unlocked the next chapter.</p>
       </div>
    <</append>>
<</timed>>

<<timed 5s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>


:: wordsAdded3a [nobr]
/* NARWAL  */
<<set $prevpass to "ger7-1">>
<<set $pass to "wordsAdded3a">>
<<set $nextpass to "bookrooting3">>
<div id="audio"></div>
<main class="main-words added">
 <div class="eating-container">
   <p>
  <span class="eaten">It</span> <span class="eaten">was</span> <span class="eaten">in</span> <span class="eaten">1949</span> <span class="eaten">-</span> <span class="eaten">a</span> <span class="eaten">narwhal</span> <span class="eaten">-</span> <span class="eaten">considered</span> <span class="eaten">a</span> <span class="eaten">‘Sea</span> <span class="eaten">Unicorn’</span> <span class="eaten">because</span> <span class="eaten">of</span> <span class="eaten">its</span> <span class="eaten">long</span> <span class="eaten">tusk</span> <span class="eaten">-</span> <span class="eaten">washed</span> <span class="eaten">up</span> <span class="eaten">along</span> <span class="eaten">the</span> <span class="keep remaining">River Medway</span>
</p>
<p>
  <span class="eaten">Many</span> <span class="eaten">myths</span> <span class="eaten">and</span> <span class="eaten">legends</span> <span class="eaten">are</span> <span class="eaten">based</span> <span class="eaten">on</span> <span class="eaten">misunderstood</span> <span class="eaten">sightings</span> <span class="eaten">of</span> <span class="eaten">real</span> <span class="keep remaining">creatures</span>
</p>
<p>
  <span class="eaten">But</span> <span class="eaten">they</span> <span class="eaten">normally</span> <span class="eaten">are</span> <span class="eaten">found</span> <span class="eaten">in</span> <span class="eaten">the</span> <span class="keep remaining">arctic</span> <span class="eaten">-</span> <span class="eaten">so</span> <span class="eaten">finding</span> <span class="eaten">one</span> <span class="eaten">here</span> <span class="eaten">was</span> <span class="eaten">incredibly</span> <span class="eaten">rare.</span>
</p>
<p>
  <span class="eaten">It</span> <span class="eaten">was</span> <span class="eaten">so</span> <span class="eaten">rare</span> <span class="eaten">that</span> <span class="eaten">it</span> <span class="eaten">is</span> <span class="eaten">now</span> <span class="eaten">documented</span> <span class="eaten">in</span> <span class="eaten">the</span> <span class="eaten">Natural</span> <span class="eaten">History</span> <span class="eaten">Museum</span> <span class="eaten">in</span> <span class="eaten">London.</span>
</p>
</div>


</main>

<<include "footerwords">>

<<done>>
  <<set $still to setup.restoreWords()>>
<</done>>
<<timed 0.5s>>
  <<replace "#audio">>
    <audio src="assets/audio/TheNarwhal.mp3" autoplay>Audio is not supported on your device</audio>
    <</replace>>
<</timed>>

:: bookrooting3 [nobr]
<<set $prevpass to "wordsAdded3a">>
<<set $pass to "bookrooting3">>
<<set $nextpass to "ger8-1">>
<<audio "rooting" play>>
<main class="rooting">
  <div class="book-wrapper wobble-animation">
  <img src="/assets/img/open-book.png" alt="open book"/>
  </div>
  <div id="mount"></div>
  <<timed 0.3s>>
  <<replace "#mount">>
      <<type 80ms>>
<h2 class="octo-title">Book Rooting...</h2>
<</type>>
  <</replace>>
<</timed>>
</main>

  <<timed 8s>>
  
          <<goto $nextpass>>
    
    <</timed>>
:: ger8-1 [nobr]
<<set $prevpass to "bookrooting3">>
<<set $pass to "ger8-1">>
<<set $nextpass to "ger8-2">>

<<include "_templateGeraldine">>

:: ger8-1-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>Yes! Another chapter rooted! </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>I want to stop the Book Monster and find out who the author is - all on my first day. </p>
       </div>
    <</append>>
<</timed>>

<<timed 5s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: ger8-1b [nobr]
<<set $prevpass to "ger8-1">>
<<set $pass to "ger8-1b">>
<<set $nextpass to "ger8-2">>

<<include "_templateGeraldine">>

:: ger8-1b-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>Ok - Googly Moogly doesn’t seem happy with what we are doing. </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>But we need to keep going. </p>
       </div>
    <</append>>
<</timed>>


<<timed 6s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>


:: ger8-2 [nobr]
<<set $prevpass to "ger8-1b">>
<<set $pass to "ger8-2">>
<<set $nextpass to "chapterTitle4">>

<<include "_templateGeraldine">>

:: ger8-2-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>Wait, this is strange.  </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>This chapter doesn’t seem to have been eaten in the same way. </p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>You could find a bench to sit down if you’d like. </p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>I’ll open it to see what is going on. </p>
       </div>
    <</append>>
<</timed>>


<<timed 12s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: chapterTitle4 [nobr]
<<set $prevpass to "ger8-2">>
<<set $pass to "chapterTitle4">>
<<set $nextpass to "wordsAdded4a">>
<<set $currentChapter to 4>>
<div id="audio"> <audio src="assets/audio/NewChapterSound.mp3" autoplay>Audio is not supported on your device</audio></div>
<<include "_chapterTitleTemplate">>
<<include "footerintro">>





:: wordsAdded4a [nobr]
/* THIS ONE THE WORDS ARE THERE  */
<<set $prevpass to "chapterTitle4">>
<<set $pass to "wordsAdded4a">>
<<set $nextpass to "ger9-2">>
<div id="audio"></div>
<main class="main-words added">
  <div class="eating-container">
  <p>
  <span>Deep</span> <span>below</span> <span>the</span> <span>ground,</span> <span>there</span> <span>are</span> <span>mysteries</span> <span>to</span> <span>be</span> <span>found.</span> <span>Big</span> <span>ones.</span>
</p>
<p>
  <span>In</span> <span>1913,</span> <span>a</span> <span>prehistoric</span> <span class="keep">elephant</span> <span>skeleton</span> <span>was</span> <span>found</span> <span>in</span> <span>Upnor.</span>
</p>
<p>
  <span>It</span> <span>weighed</span> <span>10</span> <span>tonnes,</span> <span>which</span> <span>is</span> <span>the</span> <span>same</span> <span>as</span> <span>the</span> <span>weight</span> <span>of</span> <span>the</span> <span class="keep">Big</span> <span class="keep">Ben</span> <span class="keep">Bell.</span>
</p>
<p>
  <span>It</span> <span>was</span> <span>HUGE</span>
</p>
<p>
  <span>And</span> <span>it</span> <span>used</span> <span>to</span> <span>roam</span> <span>here</span>
</p>
<p>
  <span>They</span> <span>think</span> <span>around</span> <span>130,000</span> <span>and</span> <span>40,000</span> <span>years</span> <span>ago.</span>
</p>
<p>
  <span>The</span> <span class="keep">skeleton</span> <span>was</span> <span>discovered</span> <span>by</span> <span>Sydney</span>  <span>Turner</span> <span>and</span> <span>he</span> <span>became</span> <span>famous</span> <span>because</span> <span>of</span> <span>the</span> <span>find.</span>  
</p>
<p>
<span>Here’s</span> <span>his</span> <span>picture.</span>
</p> 
<div class="message-img-wrapper">
  <img  src="assets/img/sydney.jpg" alt="Sydney Turner"/>
</div>
</div>
</main>


<<include "footerwords">>

<<done>>
  <<set $still to setup.restoreWords()>>
<</done>>
<<timed 0.5s>>
  <<replace "#audio">>
    <audio src="assets/audio/PaintedElephant.mp3" autoplay>Audio is not supported on your device</audio>
    <</replace>>
<</timed>>

:: ger9-2 [nobr]
<<set $prevpass to "wordsAdded4a">>
<<set $pass to "ger9-2">>
<<set $nextpass to "wordsAdded4b">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>

:: ger9-2-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>It seems the story has been rooted by local residents. </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: wordsAdded4b [nobr]
/* THIS ONE THE WORDS ARE THERE AND GET TAKEN AWAY  */
<<set $prevpass to "ger9-2">>
<<set $pass to "wordsAdded4b">>
<<set $nextpass to "ger10-1">>

<main class="main-words added">
  <div class="eating-container">
  <p>
  <span>Deep</span> <span>below</span> <span>the</span> <span>ground,</span> <span>there</span> <span>are</span> <span>mysteries</span> <span>to</span> <span>be</span> <span>found.</span> <span>Big</span> <span>ones.</span>
</p>
<p>
  <span>In</span> <span>1913,</span> <span>a</span> <span>prehistoric</span> <span class="keep">elephant</span> <span>skeleton</span> <span>was</span> <span>found</span> <span>in</span> <span>Upnor.</span>
</p>
<p>
  <span>It</span> <span>weighed</span> <span>10</span> <span>tonnes,</span> <span>which</span> <span>is</span> <span>the</span> <span>same</span> <span>as</span> <span>the</span> <span>weight</span> <span>of</span> <span>the</span> <span class="keep">Big</span> <span class="keep">Ben</span> <span class="keep">Bell.</span>
</p>
<p>
  <span>It</span> <span>was</span> <span>HUGE</span>
</p>
<p>
  <span>And</span> <span>it</span> <span>used</span> <span>to</span> <span>roam</span> <span>here</span>
</p>
<p>
  <span>They</span> <span>think</span> <span>around</span> <span>130,000</span> <span>and</span> <span>40,000</span> <span>years</span> <span>ago.</span>
</p>
<p>
  <span>The</span> <span class="keep">skeleton</span> <span>was</span> <span>discovered</span> <span>by</span> <span>Sydney</span>  <span>Turner</span> <span>and</span> <span>he</span> <span>became</span> <span>famous</span> <span>because</span> <span>of</span> <span>the</span> <span>find.</span>  
</p>
<p>
<span>Here’s</span> <span>his</span> <span>picture.</span>
</p> 

</div>
</main>


<<include "footerwords">>

<<done>>
  <<set $still to setup.quickEatWords()>>
<</done>>

<<timed 10s>>

   <<audio "monster4" "play">>
  <</timed>>


:: ger10-1 [nobr]
<<set $prevpass to "wordsAdded4b">>
<<set $pass to "ger10-1">>
<<set $nextpass to "ger10-2">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>

:: ger10-1-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>Ok I spoke too soon. </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>It has been partially rooted. </p>
       </div>
    <</append>>
<</timed>>

<<timed 5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>The story is in Chatham as a mural. </p>
       </div>
    <</append>>
<</timed>>

<<timed 7s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>But unless we find out where it is we might lose the Chapter. </p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: ger10-2 [nobr]
<<set $prevpass to "ger10-1">>
<<set $pass to "ger10-2">>
<<set $nextpass to "360image">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>

:: ger10-2-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>I’m going to see if I can patch you into a CCTV camera near the mural by unlocking something here at OCTOPUS. </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>See if you can work out what the name is of the place the mural is in. </p>
       </div>
    <</append>>
<</timed>>

<<timed 5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Ok - I don’t want to rush you but it seems we only have 30 seconds to find out the information. </p>
       </div>
    <</append>>
<</timed>>

<<timed 7s>>
    <<replace "#nextButtonContainer">>
    <<button "Okay!">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>


:: timer [nobr]
  <<audio "30s" "play">>
<<set $seconds to 30>>
<span id="countdown"><span class="secs">$seconds</span> <span class="extra">seconds</span></span>


<<silently>>
	<<repeat 1s>>
		<<set $seconds to $seconds - 1>>
		<<if $seconds gt 0>>
			<<replace "#countdown">><span class="secs">$seconds</span> <span class="extra">seconds</span><</replace>>
		<<else>>
			<<replace "#countdown">><strong>Too Late</strong><</replace>>
      <<timed 1.5s>>
        <<goto "notime">>
        <</timed>>
  
			<<stop>>
		<</if>>
	<</repeat>>
<</silently>>

:: notime [nobr]
<<set $prevpass to "360image">>
<<set $pass to "notime">>
<<set $nextpass to "360image">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>

:: notime-messages [nobr]
<<timed 0.3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>Oh no...</p>
       </div>
    <</append>>
<</timed>>
<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>You didn't find it in time.</p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Let's see if I can reboot the CCTV</p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Good luck. </p>
       </div>
    <</append>>
<</timed>>

<<timed 10s>>
    <<replace "#nextButtonContainer">>
    <<button "I'm ready">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>


:: header360elephant[nobr]
<header class="pano timer "><span>Find the name of the road</span>
  <<include "timer">></header>

:: 360image [nobr]
<<set $prevpass to "ger10-2">>
<<set $pass to "360image">>
<<set $nextpass to "ger11-1">>
<<include "header360elephant">>
	<main id="main" class="pano">
	/* <<if $audioOn is true>><audio src="https://remote.co.com/MoTT/AgentTraining/assets/audio/Welcome1.mp3" autoplay>Audio not supported in your browser</audio><</if>> */

<iframe width="90%" height="500px" allowFullScreen="true" allow="accelerometer; magnetometer; gyroscope" style="display:block; margin:20px auto; border:0 none; max-width:880px;border-radius:8px; box-shadow: 0 1px 1px rgba(0,0,0,0.11),0 2px 2px rgba(0,0,0,0.11),0 4px 4px rgba(0,0,0,0.11),0 6px 8px rgba(0,0,0,0.11),0 8px 16px rgba(0,0,0,0.11);" src="https://panoraven.com/en/embed/S8FIEpERCW"></iframe>


	</main>
	<<include "footer360elephant">>


:: pw360elephant [nobr]
<div id="codewordWrapper" class="codeword-wrapper">

    <label for="textbox--password" tabindex="0"><span aria-label="Enter the word below">CODEWORD:</span></label>

    <!-- CODEWORD INPUT -->
    <div class="input-wrapper">
        <div class="code-input pano">
            <<textbox "_password" "" >>
        </div>
        <span class="button-wrapper" aria-label="Click Button to Check your answer">
            <<button "Enter">>

            <!-- STANDARDIZE INPUT -->
            <<set _password to _password.toUpperCase().trim()>>

            <!-- CODEWORD CORRECT -->
            <<if _password isnot "" and (_password is "NEWNHAM STREET" or _password is "NEWNHAM")>>
                <<audio "correct" play>>
                <<replace "#elecoderesult">><h2>Correct!</h2><</replace>>
                <<timed 3s>><<goto $nextpass>><</timed>>
            <</if>>

            <!-- CODEWORD INCORRECT -->
            <<if _password isnot "" and (_password isnot "NEWNHAM STREET" and _password isnot "NEWNHAM")>>
                <<audio "error" play>>
                <<replace "#elecoderesult">><h2>That's not right.</h2><</replace>>
                <<timed 1.5s>><<replace "#elecoderesult">><</replace>><</timed>>
            <</if>>

            <</button>>
        </span>
    </div>

    <div id="elecoderesult"></div>
</div>


:: footer360elephant [nobr]

<footer class="pano">
<nav class=""><div id="back" class="button-wrapper">
 <<button "Back">>
        <<goto "landing">>
    <</button>>
</div></nav>
  <<include "pw360elephant">></footer>

:: ger11-1 [nobr]
<<set $prevpass to "360image">>
<<set $pass to "ger11-1">>
<<set $nextpass to "chapterTitle5">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>

:: ger11-1-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>You did it. </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Ok we are so close this is the fifth and final chapter. </p>
       </div>
    <</append>>
<</timed>>

<<timed 5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>And maybe finding out who the author is! </p>
       </div>
    <</append>>
<</timed>>

<<timed 7s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Let’s load up the final chapter. </p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<replace "#nextButtonContainer">>
    <<button "Okay!">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: chapterTitle5 [nobr]
<<set $prevpass to "ger11-1">>
<<set $pass to "chapterTitle5">>
<<set $nextpass to "wordsLeft5">>
<<set $currentChapter to 5>>
<div id="audio"> <audio src="assets/audio/NewChapterSound2.mp3" autoplay>Audio is not supported on your device</audio></div>
<<include "_chapterTitleTemplate">>
<<include "footerintro">>

:: wordsLeft5 [nobr]
<<set $prevpass to "chapterTitle5">>
<<set $pass to "wordsLeft5">>
<<set $nextpass to "ger12-1">>
<<audio ":all" stop>>
<<audio "wordeat" play loop>>
<main class="main-words">
  <div class="eating-container">
   <p>
  <span>The</span> <span>Medway</span> <span>Queen.</span>
</p>
<p>
  <span>A</span> <span>Paddle</span> <span>Steamer.</span>
</p>
<p>
  <span>With</span> <span>a</span> <span>twist</span>
</p>
<p>
  <span>The</span> <span>Medway</span> <span>Queen</span> <span>had</span> <span>the</span> <span>ability</span> <span>to</span> <span>sweep</span> <span>for</span> <span class="keep">mines</span>
</p>
<p>
  <span>And</span> <span>save</span> <span>lives.</span>
</p>
<p>
  <span>She</span> <span>swept</span> <span>mines</span> <span>to</span> <span>protect</span> <span>the</span> <span>waters</span> <span>in</span> <span>WW2</span> <span>in</span> <span>the</span> <span>10th</span> <span>Minesweeping</span> <span>Flotilla.</span>
</p>
<p>
  <span>Next,</span> <span>she</span> <span>was</span> <span>part</span> <span>of</span> <span class="keep">Operation</span> <span>Dynamo,</span> <span>where</span> <span>around</span> <span>850</span> <span>small</span> <span>ships</span> <span>braved</span> <span>the</span> <span>channel</span> <span>crossing</span> <span>to</span> <span>save</span> <span>Allied</span> <span>Troops</span> <span>from</span> <span>Dunkirk.</span>
</p>
<p>
  <span>She</span> <span>saved</span> <span>around</span> <span>7000</span> <span>Allied</span> <span class="keep">soldiers</span> <span>and</span> <span>was</span> <span>dubbed</span> <span>the</span> <span >"Heroine</span> <span>of</span> <span>Dunkirk"</span>
</p>
</div>

</main>

<<include "footer">>

<<done>>
<<set $move to setup.quickEatWords()>>
<</done>>

<<timed 8s>>
  <<addclass "body" "flashing-effect">>
  <<audio ":all" stop>>
<<audio "siren" play loop>>
  <</timed>>

<<timed 16s>>
  <<goto $nextpass>>
  <</timed>>

/* :: alarm [nobr]
<<set $prevpass to "wordsLeft5">>
<<set $pass to "alarm">>
<<set $nextpass to "ger12-1">>
<<audio ":all" stop>>
<<audio "siren" "play">>
<main class="flashing-effect">
<h2>ALARM</h2>
</main>
<<include "footer">> */

:: ger12-1 [nobr]
/* TODO CHANGE TO ALARM  */
<<set $prevpass to "wordsLeft5">>
<<set $pass to "ger12-1">>
<<set $nextpass to "minesChallenge">>
<<audio ":all" stop>>
<<audio "LQintensity3" play loop>>
<<timed 0.1s>>
<<addclass "header" "alarm">>
<<addclass "body" "alarm">>
<</timed>>

<<include "_templateGeraldine">>

:: ger12-1-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>Wait - what is that? Did you set off an alarm here at OCTOPUS? </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Those words didn’t sound good either. Mines. Detonation. Explosion. 3 things I would like to avoid. </p>
       </div>
    <</append>>
<</timed>>

<<timed 5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>It’s saying here we need to stop mines from exploding. Exploding here at OCTOPUS HQ. </p>
       </div>
    <</append>>
<</timed>>

<<timed 7s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Mines that have been placed by the Monster. </p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>How can this be happening!? How is the Monster doing this?! </p>
       </div>
    <</append>>
<</timed>>

<<timed 11s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>This can’t be good. </p>
       </div>
    <</append>>
<</timed>>

<<timed 13s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>I’m sending the locations to your screen. </p>
       </div>
    <</append>>
<</timed>>

<<timed 15s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Head to the locations now and send me the codes. </p>
       </div>
    <</append>>
<</timed>>

<<timed 17s>>
    <<replace "#nextButtonContainer">>
    <<button "Okay!">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>



:: headermines [nobr]
<header class="intro">
  <div class="logo-wrapper ">
  <img src="/assets/img/logo.png" alt="logo"/>
  </div>
  <div class="octo-title-wrapper">
    <h2 class="octo-title">OCTOPUS</h2>
    /* <span>Rooter</span> */
  </div>
</header>

:: minesChallenge [nobr]
<<set $prevpass to "ger12-1">>
<<set $pass to "minesChallenge">>
<<set $nextpass to "ger13-1">>
<<set $correctansmines to []>>
<<include "headermines">>

<main class="main-section codebreaking" id="mainMount">
<div id="clueMount">
    <h2 class="octo-title">Locations</h2>
  </div>
  <br/>

<div class="wordcontainer">
<<set $current to "">>
/* Letter S  */
<div class="letter-item l" id="letterItemL">
  <<link "1">>
   <<set $current to "l">>
    <<if $current is "l">> 
    <<replace "#clueMount">>
        /* Make box gold, turn off any other gold boxes */
         <<addclass "#letterItemL" "current">> 
        <<removeclass "#letterItemA" "current">>   
        <<removeclass "#letterItemC" "current">>   
     
      <h2 class="octo-title">Location 1</h2>
       <p>Facing the Library - the Cannon on the left - the number on there.</p>

    <</replace>>
  
    <<replace "#inputMount">>
        <div id="coderesult"></div>
    
        <div class="code-input"><<textbox "$l" "">></div>
        <<button "Enter">>
       
        /% PASSWORD CODE %/
        <<set $l to $l.toUpperCase().trim()>>
        /% CODEWORD CORRECT %/
        <<if $l isnot "" and $l is "24">>
        <<timed 0.1s>>
         <<replace "#coderesult">><div class="confirmation" id="confirmation">Correct!</div><</replace>>
        
        <</timed>>
        <<timed 1s>>
            <<run $correctansmines.push("L")>>
            <<include "checkcorrectansmines">>
            <<replace "#letterItemL">><div class="correct-letter">
               
              <img src="assets/img/tick.png" alt="tick"/></div>
            <</replace>>
            <<replace "#inputMount">><</replace>>
             <<replace "#clueMount">><</replace>>
             <<audio "mine1" play>>
        <</timed>>
        <</if>>
        /% CODEWORD INCORRECT %/
        <<if $l isnot "" and $l isnot "24">>
        <<timed 0.1s>>
          <<replace "#coderesult">><div class="confirmation" id="confirmation">That's not right...</div><</replace>>
         <</timed>>
        <<timed 1.5s>><<replace "#coderesult">><</replace>><</timed>>
        <</if>><</button>>
    <</replace>>
   <</if>>   

  <</link>>
</div>
/* Letter A  */
<div class="letter-item a" id="letterItemA">
  <<link "2">>

   <<set $current to "a">>
    <<if $current is "a">> 
    <<replace "#clueMount">>
        /* Make box gold, turn off any other gold boxes */
         <<removeclass "#letterItemL" "current">> 
        <<addclass "#letterItemA" "current">>   
        <<removeclass "#letterItemC" "current">>   

   <h2 class="octo-title">Location 2</h2>
       <p>Near the middle cannon - there’s a sign - the number is the range of the 18 pounder cannon in yards</p>
    <</replace>>
    <<replace "#inputMount">>
        <div id="coderesult"></div>
        <div class="code-input"><<textbox "$a" "">></div>
        <<button "Enter">>
       
        /% PASSWORD CODE %/
        <<set $a to $a.toUpperCase().trim()>>
        /% CODEWORD CORRECT %/
        <<if $a isnot "" and $a is "3500">>
        <<replace "#coderesult">><div class="confirmation" id="confirmation">Correct!</div><</replace>>
         
        <<run $correctansmines.push("A")>>
            <<include "checkcorrectansmines">>
        <<timed 1s>>
            <<replace "#letterItemA">><div class="correct-letter">
              <img src="assets/img/tick.png" alt="tick"/></div>
            <</replace>>
            <<replace "#inputMount">><</replace>>
             <<replace "#clueMount">><</replace>>
              <<audio "mine2" play>>
        <</timed>>
        <</if>>
        /% CODEWORD INCORRECT %/
        <<if $a isnot "" and $a isnot "3500">>
        <<replace "#coderesult">><div class="confirmation" id="confirmation">That's not right...</div><</replace>>
        <<timed 1.5s>><<replace "#coderesult">><</replace>><</timed>>
        <</if>><</button>>
    <</replace>>
   <</if>>   
   /* <<toggleclass "#sclue" "hide">> */
  <</link>>
</div>
/* Letter L  */
<div class="letter-item l" id="letterItemC">
  <<link "3">>
   /* <<textbox "$s" "">> */
   /* <<toggleclass $current "current">> */
   <<set $current to "l">>
    <<if $current is "l">> 
    <<replace "#clueMount">>
        /* Make box gold, turn off any other gold boxes */
         <<removeclass "#letterItemL" "current">> 
        <<removeclass "#letterItemA" "current">>   
        <<addclass "#letterItemC" "current">>   

   <h2 class="octo-title">Location 3</h2>
       <p>Numbers on the Lamp Post near the Soldier & Dog (you may need to look up)</p>
    <</replace>>
    <<replace "#inputMount">>
        <div id="coderesult"></div>
        <div class="code-input"><<textbox "$c" "">></div>
        <<button "Enter">>
       
        /% PASSWORD CODE %/
        <<set $c to $c.toUpperCase().trim()>>
        /% CODEWORD CORRECT %/
        <<if $c isnot "" and $c is "319">>
        <<replace "#coderesult">><div class="confirmation" id="confirmation">Correct! </div><</replace>>
         
        <<timed 1s>>
            <<run $correctansmines.push("C")>>
            <<include "checkcorrectansmines">>
            <<replace "#letterItemC">><div class="correct-letter">
              <img src="assets/img/tick.png" alt="tick"/></div>
            <</replace>>
            <<replace "#inputMount">><</replace>>
             <<replace "#clueMount">><</replace>>
               <<audio "mine3" play>>
        <</timed>>
        <</if>>
        /% CODEWORD INCORRECT %/
        <<if $c isnot "" and $c isnot "319">>
        <<replace "#coderesult">><div class="confirmation" id="confirmation">That's not right...</div><</replace>>
        <<timed 1.5s>><<replace "#coderesult">><</replace>><</timed>>
        <</if>><</button>>
    <</replace>>
   <</if>>   
   /* <<toggleclass "#sclue" "hide">> */
  <</link>>
</div>


</div>
<br>
 
<br>
<div id="inputMount" class="mine-input"></div>
<br>
<br>


</main>
<<include "footer">>


:: checkcorrectansmines[nobr]

<<if $correctansmines.includesAll("L", "A", "C")>>
  <<timed 1s>>
<<audio "correct" play>>
<</timed>>
<<timed 3s>>

  <<goto $nextpass>>
  <</timed>>
<</if>>




<div id="resultbutton">
  /% CODEWORD INPUT %/
  <div class="code-input multibox center-col">
    <div class="multi-input-wrapper">
      <<textbox "$code1" "">>
      <<textbox "$code2" "">>
      <<textbox "$code3" "">>
    </div>
    <br/>
    <div id="coderesult"></div>
    <br/>
 <span class="button-wrapper" aria-label="Click button to see if answer is correct ">
    
    <<button "Enter">>
  </div>
  /% PASSWORD CODE %/
  <<set $code1 to $code1.toUpperCase().trim()>>
  <<set $code2 to $code2.toUpperCase().trim()>>
  <<set $code3 to $code3.toUpperCase().trim()>>
  /% CODEWORD CORRECT %/
  <<if $code1 isnot "" and $code2 isnot "" and $code3 isnot "">>
    <<if ($code1 + $code2 + $code3) is "243500319">>
     <<replace "#coderesult">><p>CORRECT</p><</replace>>
      <<audio "correct" play>>
      <<timed 3s>><<goto $nextpass>><</timed>>
    <</if>>
  <</if>>
  /% CODEWORD INCORRECT %/
  <<if $code1 isnot "" and $code2 isnot "" and $code3 isnot "">>
    <<if ($code1 + $code2 + $code3) isnot "243500319">>
         <<replace "#coderesult">><p>That's not right.</p><</replace>>
      <<timed 1.5s>><<replace "#coderesult">><</replace>><</timed>>
    <</if>>
  <</if>>
<</button>>

</span>
</div>
</div>

:: ger13-1 [nobr]
<<set $prevpass to "minesChallenge">>
<<set $pass to "ger13-1">>
<<set $nextpass to "wordsAdded5">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>

:: ger13-1-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>You have unlocked the fifth and final chapter . </p>
       </div>
    <</append>>
<</timed>>

   <<timed 4s>>
      <<replace "#nextButtonContainer">>
      <<button "Next">>
          <<goto $nextpass>>
        <</button>>
          <</replace>>
    <</timed>>

:: wordsAdded5 [nobr]
<<set $prevpass to "ger13-1">>
<<set $pass to "wordsAdded5">>
<<set $nextpass to "ger14-1">>
<div id="audio"></div>
<main class="main-words added">
   <div class="eating-container">
   <p>
  <span class="eaten">The</span> <span class="eaten">Medway</span> <span class="eaten">Queen.</span>
</p>
<p>
  <span class="eaten">A</span> <span class="eaten">Paddle</span> <span class="eaten">Steamer.</span>
</p>
<p>
  <span class="eaten">With</span> <span class="eaten">a</span> <span class="eaten">twist</span>
</p>
<p>
  <span class="eaten">The</span> <span class="eaten">Medway</span> <span class="eaten">Queen</span> <span class="eaten">had</span> <span class="eaten">the</span> <span class="eaten">ability</span> <span class="eaten">to</span> <span class="eaten">sweep</span> <span class="eaten">for</span> <span class="keep remaining">mines</span>
</p>
<p>
  <span class="eaten">And</span> <span class="eaten">save</span> <span class="eaten">lives.</span>
</p>
<p>
  <span class="eaten">She</span> <span class="eaten">swept</span> <span class="eaten">mines</span> <span class="eaten">to</span> <span class="eaten">protect</span> <span class="eaten">the</span> <span class="eaten">waters</span> <span class="eaten">in</span> <span class="eaten">WW2</span> <span class="eaten">in</span> <span class="eaten">the</span> <span class="eaten">10th</span> <span class="eaten">Minesweeping</span> <span class="eaten">Flotilla.</span>
</p>
<p>
  <span class="eaten">Next,</span> <span class="eaten">she</span> <span class="eaten">was</span> <span class="eaten">part</span> <span class="eaten">of</span> <span class="keep remaining">Operation</span> <span class="eaten">Dynamo,</span> <span class="eaten">where</span> <span class="eaten">around</span> <span class="eaten">850</span> <span class="eaten">small</span> <span class="eaten">ships</span> <span class="eaten">braved</span> <span class="eaten">the</span> <span class="eaten">channel</span> <span class="eaten">crossing</span> <span class="eaten">to</span> <span class="eaten">save</span> <span class="eaten">Allied</span> <span class="eaten">Troops</span> <span class="eaten">from</span> <span class="eaten">Dunkirk.</span>
</p>
<p>
  <span class="eaten">She</span> <span class="eaten">saved</span> <span class="eaten">around</span> <span class="eaten">7000</span> <span class="eaten">Allied</span> <span class="keep remaining">soldiers</span> <span class="eaten">and</span> <span class="eaten">was</span> <span class="eaten">dubbed</span> <span class="eaten">the</span> <span >"Heroine</span> <span class="eaten">of</span> <span class="eaten">Dunkirk"</span>
</p>
</div>
<br/><br/><br/><br/>
</main>


<<include "footerwords">>

<<done>>
  <<set $still to setup.restoreWords()>>
<</done>>
<<timed 0.5s>>
  <<replace "#audio">>
    <audio src="assets/audio/TheLifeSavingClub.mp3" autoplay>Audio is not supported on your device</audio>
    <</replace>>
<</timed>>


:: ger14-1 [nobr]
<<set $prevpass to "wordsAdded5">>
<<set $pass to "ger14-1">>
<<set $nextpass to "ger14-2">>

<<include "_templateGeraldine">>

:: ger14-1-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>Wow - what a boat. </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>I never thought I’d say that sentence. </p>
       </div>
    <</append>>
<</timed>>

<<timed 5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>And after its lifesaving service, it took on a new life. </p>
       </div>
    <</append>>
<</timed>>

<<timed 7s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>The life of the party. </p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>The Lifesaving Boat became the Lifesaving Club. </p>
       </div>
    <</append>>
<</timed>>

<<timed 11s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>A club for all to dance the night away. </p>
       </div>
    <</append>>
<</timed>>

<<timed 13s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto "bookrooting">>
    <</button>>
    <</replace>>
<</timed>>

:: ger14-2 [nobr]
<<set $prevpass to "ger14-1">>
<<set $pass to "ger14-2">>
<<set $nextpass to "ger14-3">>

<<include "_templateGeraldine">>


:: ger14-2-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>TWIST. </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>A boat that became a club! </p>
       </div>
    <</append>>
<</timed>>

<<timed 5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>I love a good twist. </p>
       </div>
    <</append>>
<</timed>>

<<timed 7s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>I hope you do too. </p>
       </div>
    <</append>>
<</timed>>

<<timed 10s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>I wasn’t expecting that at all. </p>
       </div>
    <</append>>
<</timed>>

<<timed 13s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Were you ? </p>
       </div>
    <</append>>
<</timed>>


<<timed 15s>>
    <<replace "#nextButtonContainer">>
    <<button "No!">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: ger14-3 [nobr]
<<set $prevpass to "ger14-2">>
<<set $pass to "ger14-3">>
<<set $nextpass to "ger14-3b">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>


:: ger14-3-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>Ok we have all of the parts we need. </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>5 chapters. </p>
       </div>
    <</append>>
<</timed>>

<<timed 5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>We need to go to the Medway Map to complete the rooting.</p>
       </div>
    <</append>>
<</timed>>

<<timed 7s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Doing this will root the book forever. </p>
       </div>
    <</append>>
<</timed>>

<<timed 10s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>And stop Googly Moogly. </p>
       </div>
    <</append>>
<</timed>>

<<timed 13s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto "roar">>
    <</button>>
    <</replace>>
<</timed>>


:: ger14-3b [nobr]
<<set $prevpass to "ger14-3">>
<<set $pass to "ger14-3b">>
<<set $nextpass to "ger14-4">>
<<audio ":all" stop>>
<<include "_templateGeraldine">>


:: ger14-3b-messages [nobr]

<<timed 0.5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>And not a moment too soon it seems.  </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Near the casemates you can find the map of Chatham.</p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Stand around the map.  </p>
       </div>
    <</append>>
<</timed>>


<<timed 9s>>
    <<replace "#nextButtonContainer">>
    <<button "We're there">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: ger14-4 [nobr]
/* ROOTING  */
<<set $prevpass to "ger14-3">>
<<set $pass to "ger14-4">>
<<set $nextpass to "ger14-4b">>
<<audio "ritual" play loop>>
<<include "_templateGeraldine">>


:: ger14-4-messages [nobr]
<<timed 0.1s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
          <p>We stand here at the Chatham map.  </p>
       </div>
    <</append>>
<</timed>>

<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>A place where we can see some of the places of modern day Chatham </p>
       </div>
    <</append>>
<</timed>>

<<timed 5s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>The present shaped by the past</p>
       </div>
    <</append>>
<</timed>>

<<timed 7s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Some of the past that you have just discovered</p>
       </div>
    <</append>>
<</timed>>



<<timed 10s>>
    <<replace "#nextButtonContainer">>
    <<button "Next">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>

:: ger14-4b [nobr]
/* ROOTING  */
<<set $prevpass to "ger14-4">>
<<set $pass to "ger14-4b">>
<<set $nextpass to "dragIntoBook">>

<<include "_templateGeraldine">>


:: ger14-4b-messages [nobr]
<<timed 0.5s>>
    <<audio "ping1" "play">>
    <<replace "#msgMount">>
       <div class="message"> 
        <p>It’s time to fill the book again </p>
       </div>
    <</replace>>
<</timed>>


<<timed 3s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>It’s time to root the book again.  </p>
       </div>
    <</append>>
<</timed>>

<<timed 6s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Here in the present.  </p>
       </div>
    <</append>>
<</timed>>

<<timed 9s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>We are halting the Book Monster with every act we have taken </p>
       </div>
    <</append>>
<</timed>>

<<timed 13s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>We need to do two things to finish this.  </p>
       </div>
    <</append>>
<</timed>>

<<timed 17s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>Drag the chapters into the Chatham Stories book.   </p>
       </div>
    <</append>>
<</timed>>

<<timed 20s>>
    <<audio "ping1" "play">>
    <<append "#msgMount">>
       <div class="message"> 
        <p>And when I say, we need to vanquish Googly Moogly for good by saying BE GONE GOOGLY MOOGLY. </p>
       </div>
    <</append>>
<</timed>>


<<timed 23s>>
    <<replace "#nextButtonContainer">>
    <<button "We're ready">>
        <<goto $nextpass>>
    <</button>>
    <</replace>>
<</timed>>


:: headerDrag [nobr]
<header class="drag">
 <div class="drag-msg-wrapper"><h2 class="octo-title" id="message">DRAG THE CHAPTERS BACK INTO THE BOOK</h2></div>
</header>

/* :: headerDrag [nobr]
<header class="intro">
  <div class="logo-wrapper ">
  <img src="/assets/img/logo.png" alt="logo"/>
  </div>
  <div class="octo-title-wrapper">
    <h2 class="octo-title">OCTOPUS</h2>
 
    <span>Rooting</span>
  </div>

</header> */
    

:: dragIntoBook[nobr]
<<set $prevpass to "ger14-4">>
<<set $pass to "dragIntoBook">>
<<set $nextpass to "begone">>
<<removeclass "body" "green">>
<<include "headerDrag">>
<div id="port-container">
  <img id="book-image" class="" src="assets/img/open-book.png" alt="Port">
  <div id="target-area1"></div>
   <div id="target-area2"></div>
   
  <img id="chapter-one" class="draggable-image" src="/assets/img/chapter1-white.png" alt="Chapter 1" draggable="true">
  <img id="chapter-two" class="draggable-image" src="/assets/img/chapter2-white.png" alt="Chapter 2" draggable="true">
  <img id="chapter-three" class="draggable-image" src="/assets/img/chapter3-white.png" alt="Chapter 3" draggable="true">
 <img id="chapter-four" class="draggable-image" src="/assets/img/chapter4-white.png" alt="Chapter 4" draggable="true">
  <img id="chapter-five" class="draggable-image" src="/assets/img/chapter5-white.png" alt="Chapter 5" draggable="true">
</div>
<<include "footer">>

<<done>>
<<set $s to setup.boatMultiDraggable()>><</done>>


:: footerdrag[nobr]
<footer>
    <<button "Back">>
        <<goto $prevpass>>
    <</button>>
    
    <div id="audio">
     </div>
</footer>


:: headerbegone [nobr]
<header class="intro">
  <div class="logo-wrapper black">
  <img src="/assets/img/logo.png" alt="logo"/>
  </div>
  <div class="octo-title-wrapper">
    <h2 class="octo-title">OCTOPUS</h2>
    <span>Rooter</span>
  </div>
</header>



:: begone [nobr]
<<set $prevpass to "dragIntoBook">>
<<set $pass to "begone">>
<<set $nextpass to "begone">>
<<addclass "body" "green">>

<main class="begone">

  <div class="motto-container" id="countdown"> <span class="octo-title number">3</span></div>
  <br/>
  <div id="mount"></div>
</main>
<<include "footerend">>

<<timed 10s>>
  <<replace "#mount">>
    <b>Head back to the library and ask for the OCTOPUS LEDGER</b>
    <</replace>>
  <</timed>>
<<include "begonetimer">>

<<timed 30s>>
  <<goto "landing2">>
  <</timed>>


:: begonetimer [nobr]
  <<audio "30s" "play">>
<<set $seconds to 3>>

<<silently>>
	<<repeat 1s>>
		<<set $seconds to $seconds - 1>>
		<<if $seconds gt 0>>
			<<replace "#countdown">>
         <span class="octo-title number">$seconds</span>
      <</replace>>
		<<else>>
			<<replace "#countdown">>
        <span class="octo-title">BE GONE GOOGLY MOOGLY</span>
         <<audio ":all" stop>>
        <<audio "monsterdet" play>>
      <</replace>>
    
  
			<<stop>>
		<</if>>
	<</repeat>>
<</silently>>


:: landing2 [nobr] 
<<set $prevpass to "landing2">>
<<set $pass to "landing2">>
<<set $nextpass to "preintro">>
<<audio ":all" stop>>

<main class="logospin">
<div class="logo-wrapper slowRotate">
<img src="/assets/img/logo.png" alt="logo"/>

</div>
<<include "pwChathamStories">>
</main>


:: phonecallger [nobr]
<<set $prevpass to "landing2">>
<<set $pass to "phonecallger">>
<<set $nextpass to "handbackbook">>
<<timed 2s>>
<<include "clock">>
/* <<audio "bgm_space" play goto "">> */
<</timed>>
<<timed 3s>>
  <<removeclass ".opacitytwo" "opacitytwo">>
  <<replace "#audio">>
    <audio src="assets/audio/Ending.mp3" autoplay>Audio is not supported on your device</audio>
    <</replace>>
    <<timed 51s>>
      <<goto $nextpass>>
      <</timed>>
<</timed>>
<div id="audio"></div>
<main class="phonecall">
<div class="phonecall-name">
<h2>Geraldine</h2>
<span id="phonecall-time" class="phonecall-time">Connecting...</span></div>
<div class="phonecall-avatar opacitytwo"> <img src="/assets/img/logo.png" alt="logo"/></div>
<div class="phonecall-btn-wrapper">
<div class="phonecall-btn-container opacitytwo">
  <div class="phonecall-btn">[img[/assets/img/icon3.png][$prevpass]]</div>
    <div class="phonecall-btn">[img[/assets/img/icon2.png][phonecallgertext]]</div>
  <div class="phonecall-btn">[img[/assets/img/icon1.png][phonecallger]]</div>


  </div>

<div class="phonecall-btn opacitytwo hangup">[img[/assets/img/phone-down.png][$nextpass]]</div>

</div>
</main>



:: phonecallgertext [nobr]
<main class="phonetext">
<h2>Geraldine:</h2>
<br/>

<p>I told you I like Twists. </p>
<p>Yes, that's right. </p>
<p>I am the author of the book. </p>
<p>This is the OCTOPUS Agent Test. </p>
<p>We run this when we are looking for new Agents to join us. </p>
<p>And I am the Chief Rooter. </p>
<p>Call me Geraldine - That’s my name</p>
<p>And the Book Monster? It’s a real threat to our books - YES. </p>
<p>So what you did today is important </p>
<p>Because we wanted to see if you had what it takes to learn and care about Chatham Stories. </p>
<p>The past that has sculpted our present that you are in now. </p>
<p>With all of this completed, I am sure you would make excellent OCTOPUS Agents</p>
<p>And I want you to keep an eye out for future missions that might appear </p>
<p>If you ever come to the Docking Station look out for us. </p>
<p>We’ll be hiding in plain sight. </p>
<p>Protecting stories that need our help. </p>
<p>And we couldn’t do it without you. </p>
<p>Hand back the book and you’ll receive a gift from us. </p>
<p>Thank you my friends.</p>
<br/>

<<button "Back">><<goto "phonecallger">><</button>>
<<button "Next">><<goto "handbackbook">><</button>>
</main>
<br/>
<br/>


:: handbackbook [nobr]
<<set $prevpass to "phonecallger">>
<<set $pass to "handbackbook">>
<<set $nextpass to "landing">>
<<include "headerintro">>
<main class="begone upload ">

  <div class="motto-container" id="countdown"> 
  <p class="octo-welcome-text">Hand back the book and you’ll receive a gift from us. </p>
  </div>
  <br/>
  <div id="mount"></div>
</main>


<<timed 5s>>
 <<replace "#mount">>
   <<button "Back to Start">>
    <<goto "landing">><</button>>
    <</replace>>
  <</timed>>


